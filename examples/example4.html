<html>
<body>

<div id="parent-component">
    <h1>Parent: {{message}}</h1>
    <button data-pac-bind="click: sendMessageToChild">Send to Child</button>

    <div id="child-component">
        <h2>Child: {{childMessage}}</h2>
        <button data-pac-bind="click: sendNotificationToParent">Notify Parent</button>
    </div>
</div>

<script src="../wakapac.js"></script>
<script>
    const parent = wakaPAC('#parent-component', {
        message: 'Hello from parent',

        sendMessageToChild() {
            this.notifyChild('#child-component', 'updateMessage', 'Hello from parent!');
        },

        onChildUpdate(type, data, child) {
            if (type === 'messageChanged') {
                this.message = `Child says: ${data.message}`;
            }
        }
    });

    const child = wakaPAC('#child-component', {
        childMessage: 'Hello from child',

        receiveFromParent(command, data) {
            if (command === 'updateMessage') {
                this.childMessage = data;
            }
        },

        sendNotificationToParent() {
            this.notifyParent('messageChanged', {message: this.childMessage});
        }
    });
</script>
</body>
</html>
!function(){"use strict";const t=/\{\{\s*([^}]+)\s*}}/g,e=/\{\{.*}}/,n=/pac-foreach-item:\s*([^,]+),\s*index=(\d+),\s*renderIndex=(\d+)/,i=["readonly","required","selected","checked","hidden","multiple","autofocus"],r=["value","checked","visible","if","foreach","class","style","click","change","input","submit","focus","blur","keyup","keydown"],a={uniqid:(t="",e=!1)=>`${t}${(1e3*Date.now()+1e3*Math.random()).toString(16).padEnd(14,"0")}${e?`.${Math.trunc(1e8*Math.random())}`:""}`,setNestedProperty(t,e,n){const i=t.split(/[.\[\]]+/).filter(Boolean);for(let t=0;t<i.length-1;t++){const e=i[t],r=i[t+1];e in n||(n[e]=/^\d+$/.test(r)?[]:{}),n=n[e]}n[i[i.length-1]]=e},pathArrayToString(t){if(0===t.length)return"";let e=t[0];for(let n=1;n<t.length;n++){const i=t[n];/^\d+$/.test(i)?e+=`[${i}]`:e+=`.${i}`}return e},belongsToPacContainer(t,e){if(!(t instanceof Element&&t.hasAttribute("data-pac-container")))return!1;const n=e&&e.nodeType===Node.TEXT_NODE?e.parentElement:e;return n instanceof Element&&!!t.contains(n)&&n.closest("[data-pac-container]")===t},isElementVisible(t){const e=t.getBoundingClientRect(),n=window.innerHeight,i=window.innerWidth;return e.top<n&&e.bottom>0&&e.left<i&&e.right>0},isElementFullyVisible(t){const e=t.getBoundingClientRect(),n=window.innerHeight,i=window.innerWidth;return e.top>=0&&e.left>=0&&e.bottom<=n&&e.right<=i},isElementDirectlyFocused:t=>t===document.activeElement,isElementFocusWithin:t=>t===document.activeElement||t.contains(document.activeElement),getElementPosition(t){let e;if("string"==typeof t){const n=t.startsWith("#")?t.slice(1):t;e=document.getElementById(n)}else{if(!t||t.nodeType!==Node.ELEMENT_NODE)return null;e=t}if(!e)return null;const n=e.getBoundingClientRect(),i=window.scrollX||document.documentElement.scrollLeft||0,r=window.scrollY||document.documentElement.scrollTop||0;return{x:n.left+i,y:n.top+r}},domRectToSimpleObject:t=>({top:t.top,left:t.left,right:t.right,bottom:t.bottom,width:t.width,height:t.height,x:t.x,y:t.y}),getNetworkEffectiveType:()=>navigator.onLine?"connection"in navigator&&navigator.connection?.effectiveType?navigator.connection.effectiveType:"4g":"offline",readDOMValue:t=>{let e;if(e="string"!=typeof t?t&&t.nodeType?t:null:t.startsWith("#")?document.getElementById(t.slice(1)):document.querySelector(t),!e)return!1;switch(!0){case"SELECT"===e.tagName:return e.value;case"checkbox"===e.type:return e.checked;case"radio"===e.type:{const t=document.querySelector('input[name="'+e.name+'"]:checked');return t?t.value:""}case"INPUT"===e.tagName||"TEXTAREA"===e.tagName:return e.value;default:return e.textContent||e.innerText}},writeDOMValue:(t,e)=>{let n;if(n="string"!=typeof t?t&&t.nodeType?t:null:t.startsWith("#")?document.getElementById(t.slice(1)):document.querySelector(t),!n)return!1;switch(!0){case"SELECT"===n.tagName:return n.value=e,n.dispatchEvent(new Event("change",{bubbles:!0})),!0;case"checkbox"===n.type:return n.checked=Boolean(e),n.dispatchEvent(new Event("change",{bubbles:!0})),!0;case"radio"===n.type:{const t=document.querySelector('input[name="'+n.name+'"][value="'+e+'"]');return!!t&&(t.checked=!0,t.dispatchEvent(new Event("change",{bubbles:!0})),!0)}case"INPUT"===n.tagName||"TEXTAREA"===n.tagName:return n.value=e,n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),!0;default:return n.textContent=e,!0}},isEqual(t,e){if(t===e)return!0;if(Number.isNaN(t)&&Number.isNaN(e))return!0;if(!t||!e||"object"!=typeof t||"object"!=typeof e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every((t,n)=>this.isEqual(t,e[n]));const n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(n=>Object.hasOwn(e,n)&&this.isEqual(t[n],e[n]))}},o={_initialized:!1,initialize(){const t=this;if(this._initialized)return;let e,n;this._initialized=!0,document.addEventListener("visibilitychange",function(e){t.dispatchBrowserStateEvent("visibility",{visible:!document.hidden})}),window.addEventListener("online",function(e){t.dispatchBrowserStateEvent("online",{online:!0,networkType:a.getNetworkEffectiveType()})}),window.addEventListener("offline",function(e){t.dispatchBrowserStateEvent("online",{online:!1,networkType:"offline"})}),"connection"in navigator&&navigator.connection&&navigator.connection.addEventListener("change",function(e){t.dispatchBrowserStateEvent("online",{online:navigator.onLine,networkType:a.getNetworkEffectiveType()})}),document.addEventListener("focusin",function(e){t.dispatchFocusEvent("focusin",e)},!0),document.addEventListener("focusout",function(e){t.dispatchFocusEvent("focusout",e)},!0),document.addEventListener("mousedown",function(e){let n;if(0===e.button)n=513;else if(1===e.button)n=519;else{if(2!==e.button)return;n=516}t.dispatchTrackedEvent(n,e)}),document.addEventListener("mouseup",function(e){let n;if(0===e.button)n=514;else if(1===e.button)n=520;else{if(2!==e.button)return;n=517}t.dispatchTrackedEvent(n,e)}),document.addEventListener("keyup",function(e){t.dispatchTrackedEvent(257,e)}),document.addEventListener("keydown",function(e){t.dispatchTrackedEvent(256,e)}),document.addEventListener("change",function(e){"SELECT"!==e.target.tagName&&"radio"!==e.target.type&&"checkbox"!==e.target.type||t.dispatchTrackedEvent(769,e,{elementType:"SELECT"===e.target.tagName?"select":e.target.type})}),document.addEventListener("input",function(e){("INPUT"===e.target.tagName&&!["radio","checkbox"].includes(e.target.type)||"TEXTAREA"===e.target.tagName)&&t.dispatchTrackedEvent(768,e,{elementType:"TEXTAREA"===e.target.tagName?"textarea":"input"})}),document.addEventListener("submit",function(e){t.dispatchTrackedEvent(770,e)}),window.addEventListener("scroll",function(n){e||(e=setTimeout(()=>{t.dispatchBrowserStateEvent("scroll",{scrollX:window.scrollX,scrollY:window.scrollY}),e=null},16))}),window.addEventListener("resize",function(e){n||(n=setTimeout(()=>{t.dispatchBrowserStateEvent("resize",{viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,documentWidth:document.documentElement.scrollWidth,documentHeight:document.documentElement.scrollHeight,scrollX:window.scrollX,scrollY:window.scrollY}),n=null},100))})},dispatchTrackedEvent(t,e,n={}){const i=e.target.closest("[data-pac-container]");if(!i)return;const r=this.buildParams(t,e),o=new CustomEvent("pac:event",{detail:{message:t,wParam:r.wParam,lParam:r.lParam,timestamp:Date.now(),target:e.target,id:e.target.id||null,value:a.readDOMValue(e.target),originalEvent:e,extended:n}});["preventDefault","stopPropagation","stopImmediatePropagation"].forEach(t=>{const n=o[t];o[t]=function(){n&&n.call(this),e[t]&&e[t].call(e)}}),i.dispatchEvent(o)},dispatchBrowserStateEvent(t,e){document.querySelectorAll("[data-pac-container]").forEach(n=>{const i=new CustomEvent("pac:browser-state",{detail:{target:n,stateType:t,stateData:e,timestamp:Date.now()}});n.dispatchEvent(i)})},dispatchFocusEvent(t,e){const n=document.querySelectorAll("[data-pac-container]"),{target:i,relatedTarget:r}=e;n.forEach(e=>{this.isContainerAffected(e,i,r)&&e.dispatchEvent(new CustomEvent("pac:focus-state",{detail:{focusType:t,target:i,relatedTarget:r,containerFocus:a.isElementDirectlyFocused(e),containerFocusWithin:a.isElementFocusWithin(e),timestamp:Date.now()}}))})},isContainerAffected(t,e,n){const i=t.contains(e)||t===e,r=n&&(t.contains(n)||t===n);return i||r},buildParams(t,e){switch(t){case 513:case 516:case 519:case 514:case 517:case 520:return{wParam:this.buildMouseWParam(e),lParam:this.buildMouseLParam(e)};case 256:case 257:return{wParam:e.keyCode||e.which||0,lParam:this.buildKeyboardLParam(e)};case 768:return{wParam:e.target&&e.target.value?e.target.value.length:0,lParam:0};case 769:return{wParam:this.buildChangeWParam(e),lParam:0};case 770:if(!e.target||void 0===e.target.elements)return{wParam:null,lParam:{}};try{const t=new FormData(e.target),n=Object.fromEntries(t.entries());return{wParam:e.target.id||null,lParam:n}}catch(t){return{wParam:e.target.id||null,lParam:{}}}default:return{wParam:0,lParam:0}}},buildMouseWParam(t){let e=0;return t.ctrlKey&&(e|=16),t.shiftKey&&(e|=8),t.altKey&&(e|=32),1&t.buttons&&(e|=1),2&t.buttons&&(e|=2),4&t.buttons&&(e|=4),e},buildMouseLParam(t){const e=Math.max(0,Math.min(65535,t.clientX||0));return Math.max(0,Math.min(65535,t.clientY||0))<<16|e},buildKeyboardLParam(t){let e=0;return e|=65535&(t.repeat?2:1),this.isExtendedKey(t.code)&&(e|=1<<24),"keyup"===t.type&&(e|=1<<31),e},buildChangeWParam(t){const e=t.target;switch(e.type){case"checkbox":return e.checked?1:0;case"radio":{const t=document.querySelectorAll(`input[name="${e.name}"]`);return Array.from(t).indexOf(e)}default:return"selectedIndex"in e?e.selectedIndex:0}},isExtendedKey:t=>!!t&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Home","End","PageUp","PageDown","Insert","Delete","NumpadEnter","NumpadDivide","MetaLeft","MetaRight","ContextMenu"].includes(t)},s={tokens:[],currentToken:0,OPERATOR_PRECEDENCE:{"||":1,"&&":2,"===":6,"!==":6,"==":6,"!=":6,"<":7,">":7,"<=":7,">=":7,"+":8,"-":8,"*":9,"/":9,"%":9,"!":10,"unary-":10,"unary+":10},OPERATOR_TYPES:{"||":"logical","&&":"logical","===":"comparison","!==":"comparison","==":"comparison","!=":"comparison",">=":"comparison","<=":"comparison",">":"comparison","<":"comparison","+":"arithmetic","-":"arithmetic","*":"arithmetic","/":"arithmetic","%":"arithmetic"},parseExpression(t){if("object"==typeof t&&null!==t){if(t.dependencies)return t;const e=this.extractDependencies(t);return Object.assign({},t,{dependencies:e})}if(t=String(t).trim(),this.tokens=this.tokenize(t),this.currentToken=0,0===this.tokens.length)return null;const e=this.parseTernary();return e&&(e.dependencies=this.extractDependencies(e)),e},tokenize(t){const e=[];let n=0;for(;n<t.length;){const i=t[n];if(/\s/.test(i)){n++;continue}if('"'===i||"'"===i){const i=this.tokenizeString(t,n);e.push(i.token),n=i.nextIndex;continue}if(/\d/.test(i)||"."===i&&/\d/.test(t[n+1])){const i=this.tokenizeNumber(t,n);e.push(i.token),n=i.nextIndex;continue}const r=/^(===|!==|==|!=|>=|<=|&&|\|\|)/.exec(t.slice(n));if(r){const t=r[1];e.push({type:"OPERATOR",value:t,precedence:this.getOperatorPrecedence(t)}),n+=t.length;continue}const a={"(":"LPAREN",")":"RPAREN","{":"LBRACE","}":"RBRACE","[":"LBRACKET","]":"RBRACKET",",":"COMMA",".":"DOT"};if(a[i])e.push({type:a[i],value:i}),n++;else{if("+-*/<>!?:%".includes(i)){const t=this.getOperatorPrecedence(i);let r;switch(i){case"?":r="QUESTION";break;case":":r="COLON";break;default:r="OPERATOR"}e.push({type:r,value:i,precedence:t}),n++;continue}if(/[a-zA-Z_$]/.test(i)){const i=this.tokenizeIdentifier(t,n);e.push(i.token),n=i.nextIndex;continue}n++}}return e},tokenizeString(t,e){const n=t[e];let i=e+1,r="";for(;i<t.length;){const e=t[i];if("\\"===e&&i+1<t.length){const a=t[i+1];a===n||"\\"===a?(r+=a,i+=2):(r+=e,i++)}else{if(e===n)return{token:{type:"STRING",value:r},nextIndex:i+1};r+=e,i++}}throw new Error(`Unterminated string literal starting at position ${e}: expected closing ${n}`)},tokenizeNumber(t,e){const n=/^(\d*\.?\d+(?:[eE][+-]?\d+)?)/.exec(t.slice(e));if(n)return{token:{type:"NUMBER",value:parseFloat(n[1])},nextIndex:e+n[1].length}},tokenizeIdentifier(t,e){const n=/^([a-zA-Z_$][a-zA-Z0-9_$]*)/.exec(t.slice(e));if(n){const t=n[1];return{token:{type:["true","false","null","undefined"].includes(t)?"KEYWORD":"IDENTIFIER",value:t},nextIndex:e+t.length}}},getOperatorPrecedence(t){return this.OPERATOR_PRECEDENCE[t]||0},parseTernary(){let t=this.parseBinaryWithPrecedence(1);if(this.match("QUESTION")){const e=this.parseTernary();return this.consume("COLON",'Expected ":" in ternary expression'),{type:"ternary",condition:t,trueValue:e,falseValue:this.parseTernary()}}return t},parseBinaryWithPrecedence(t){let e=this.parseUnary();for(;"OPERATOR"===this.peek().type;){const n=this.getOperatorPrecedence(this.peek().value);if(n<t)break;const i=this.advance().value,r=this.parseBinaryWithPrecedence(n+1);e={type:this.OPERATOR_TYPES[i]||"arithmetic",left:e,operator:i,right:r}}return e},parseUnary(){return this.matchOperator("!","-","+")?{type:"unary",operator:this.previous().value,operand:this.parseUnary()}:this.parsePrimary()},parsePrimary(){if(this.match("LPAREN")){const t=this.parseTernary();return this.consume("RPAREN","Expected closing parenthesis"),{type:"parentheses",inner:t}}if(this.match("LBRACE"))return this.parseObjectLiteral();if(this.check("STRING"))return{type:"literal",value:this.advance().value};if(this.check("NUMBER"))return{type:"literal",value:this.advance().value};if(this.check("KEYWORD")){let t;switch(this.advance().value){case"true":t=!0;break;case"false":t=!1;break;case"null":t=null;break;case"undefined":t=void 0}return{type:"literal",value:t}}return this.check("IDENTIFIER")?this.parsePropertyAccess():null},parseObjectLiteral(){const t=[];if(!this.check("RBRACE"))do{let e;if(this.check("STRING"))e=this.advance().value;else{if(!this.check("IDENTIFIER"))throw new Error("Expected property name");e=this.advance().value}this.consume("COLON",'Expected ":" after object key');const n=this.parseTernary();t.push({key:e,value:n})}while(this.match("COMMA")&&!this.check("RBRACE"));return this.consume("RBRACE","Expected closing brace"),{type:"object",pairs:t}},parsePropertyAccess(){let t=this.advance().value;for(;;)if(this.match("DOT")){if(!this.check("IDENTIFIER"))throw new Error('Expected property name after "."');t+="."+this.advance().value}else{if(!this.match("LBRACKET"))break;{const e=this.parseTernary();this.consume("RBRACKET","Expected closing bracket"),"literal"===e.type?t+="["+JSON.stringify(e.value)+"]":t+="["+this.reconstructExpression(e)+"]"}}return{type:"property",path:t}},reconstructExpression(t){if(!t)return"";switch(t.type){case"literal":return"string"==typeof t.value?'"'+t.value+'"':String(t.value);case"property":return t.path;case"arithmetic":return`${this.reconstructExpression(t.left)} ${t.operator} ${this.reconstructExpression(t.right)}`;default:return"unknown"}},match(...t){for(const e of t)if(this.check(e))return this.advance(),!0;return!1},matchOperator(...t){if(this.check("OPERATOR")){const e=this.peek();if(t.includes(e.value))return this.advance(),!0}return!1},check(t){return!this.isAtEnd()&&this.peek().type===t},advance(){return this.isAtEnd()||this.currentToken++,this.previous()},isAtEnd(){return this.currentToken>=this.tokens.length},peek(){return this.tokens[this.currentToken]||{type:"EOF",value:null}},previous(){return this.tokens[this.currentToken-1]},consume(t,e){if(this.check(t))return this.advance();throw new Error(e+` at token: ${JSON.stringify(this.peek())}`)},evaluate(t,e,n=null){if(t)switch(t.type){case"literal":return t.value;case"property":return this.getProperty(t.path,e,n);case"parentheses":return this.evaluate(t.inner,e,n);case"object":return this.evaluateObjectLiteral(t,e,n);case"ternary":return this.evaluate(t.condition,e,n)?this.evaluate(t.trueValue,e,n):this.evaluate(t.falseValue,e,n);case"logical":{const i=this.evaluate(t.left,e,n);return"&&"===t.operator?!!i&&this.evaluate(t.right,e,n):"||"===t.operator&&(!!i||this.evaluate(t.right,e,n))}case"comparison":case"arithmetic":{const i=this.evaluate(t.left,e,n),r=this.evaluate(t.right,e,n);return this.performOperation(i,t.operator,r)}case"unary":{const i=this.evaluate(t.operand,e,n);switch(t.operator){case"!":return!i;case"-":return-i;case"+":return+i;default:return i}}default:return}},getProperty(t,e,n=null){if(!e||!t)return;let i=t;if(n&&n.resolveScopedPath&&(i=n.resolveScopedPath(t)),-1===i.indexOf(".")&&-1===i.indexOf("["))return i in e?e[i]:void 0;const r=i.split(/[.\[\]]+/).filter(Boolean);let a=e;for(let t=0;t<r.length;t++){if(null==a)return;a=a[r[t]]}return a},evaluateObjectLiteral(t,e,n=null){const i={};return t.pairs&&t.pairs.forEach(({key:t,value:r})=>{i[t]=this.evaluate(r,e,n)}),i},performOperation(t,e,n){switch(e){case"+":return t+n;case"-":return Number(t)-Number(n);case"*":return Number(t)*Number(n);case"/":return Number(t)/Number(n);case"%":return Number(t)%Number(n);case"===":return t===n;case"!==":return t!==n;case"==":return t==n;case"!=":return t!=n;case">=":return t>=n;case"<=":return t<=n;case">":return t>n;case"<":return t<n;default:return!1}},extractDependencies(t){if(!t)return[];const e=new Set,n=t=>{if(t)switch(t.type){case"property":{const n=t.path.split(/[.[]/,1)[0];n&&!["true","false","null","undefined"].includes(n)&&e.add(n);break}case"ternary":n(t.condition),n(t.trueValue),n(t.falseValue);break;case"logical":case"comparison":case"arithmetic":n(t.left),n(t.right);break;case"unary":n(t.operand);break;case"parentheses":n(t.inner);break;case"object":t.pairs&&t.pairs.forEach(t=>n(t.value))}};return n(t),Array.from(e)},parseBindingString(t){const e=[];let n="",i=!1,r="",a=0,o=0;for(let s=0;s<t.length;s++){const c=t[s],l=s>0&&"\\"===t[s-1];'"'!==c&&"'"!==c||l||(i?c===r&&(i=!1,r=""):(i=!0,r=c)),i||("("===c?a++:")"===c?a--:"{"===c?o++:"}"===c&&o--),","!==c||i||0!==a||0!==o?n+=c:(this.addBindingPairIfValid(n,e),n="")}return this.addBindingPairIfValid(n,e),e},addBindingPairIfValid(t,e){const n=t.trim();if(!n)return;const i=this.findBindingColon(n);-1===i?e.push({type:n,target:""}):e.push({type:n.substring(0,i).trim(),target:n.substring(i+1).trim()})},findBindingColon(t){for(const e of r)if(t.startsWith(e+":"))return e.length;let e=!1,n="",i=0;for(let r=0;r<t.length;r++){const a=t[r],o=r>0&&"\\"===t[r-1];if('"'!==a&&"'"!==a||o||(e?a===n&&(e=!1,n=""):(e=!0,n=a)),!e)if("("===a)i++;else if(")"===a)i--;else if(":"===a&&0===i)return r}return-1}},c={cache:new Map,maxSize:1e3,parseExpression(t){const e=String(t).trim();if(this.cache.has(e))return this.cache.get(e);const n=s.parseExpression(t);if(this.cache.size>=this.maxSize){const t=this.cache.keys().next().value;this.cache.delete(t)}return this.cache.set(e,n),n},clear(){this.cache.clear()}};function l(t){this.context=t}function h(t,e,n=null){const i=this;t.hasAttribute("data-pac-container")||t.setAttribute("data-pac-container",a.uniqid()),this.originalAbstraction=e,this.parent=n,this.container=t,this.abstraction=this.createReactiveAbstraction(),this.domUpdater=new l(this),this.dependencies=this.getDependencies(),this.interpolationMap=new Map,this.textInterpolationMap=new Map,this.setupContainerScrollTracking(),this.scanAndRegisterNewElements(this.container),this.boundHandlePacEvent=function(t){i.handleEvent(t)},this.container.addEventListener("pac:event",this.boundHandlePacEvent),this.container.addEventListener("pac:change",this.boundHandlePacEvent),this.container.addEventListener("pac:array-change",this.boundHandlePacEvent),this.container.addEventListener("pac:browser-state",this.boundHandlePacEvent),this.container.addEventListener("pac:focus-state",this.boundHandlePacEvent)}l.prototype.updateTextNode=function(e,n){const i=this,r=n.replace(t,(t,n)=>{try{const t=c.parseExpression(n),r=e.nodeType===Node.TEXT_NODE?e.parentElement:e,a={resolveScopedPath:t=>i.context.resolveScopedPath(t,r)},o=s.evaluate(t,i.context.abstraction,a);return null!=o?String(o):""}catch(e){return t}});e.textContent!==r&&(e.textContent=r)},l.prototype.updateAttributeBinding=function(t,e,n){try{const i=c.parseExpression(n.target),r={resolveScopedPath:e=>this.context.resolveScopedPath(e,t)},a=s.evaluate(i,this.context.abstraction,r);switch(e){case"value":this.applyValueBinding(t,a);break;case"checked":this.applyCheckedBinding(t,a);break;case"visible":this.applyVisibleBinding(t,a);break;case"class":this.applyClassBinding(t,a);break;case"style":this.applyStyleBinding(t,a);break;default:this.applyAttributeBinding(t,e,a)}}catch(t){}},l.prototype.applyValueBinding=function(t,e){if("radio"!==t.type){if("value"in t){const n=String(e||"");t.value!==n&&(t.value=n)}}else t.checked=t.value===String(e)},l.prototype.applyCheckedBinding=function(t,e){if("checkbox"===t.type||"radio"===t.type){const n=Boolean(e);t.checked!==n&&(t.checked=n)}},l.prototype.applyVisibleBinding=function(t,e){if(e)t.hasAttribute("data-pac-hidden")&&(t.style.display=t.getAttribute("data-pac-orig-display")||"",t.removeAttribute("data-pac-hidden"),t.removeAttribute("data-pac-orig-display"));else if(!t.hasAttribute("data-pac-hidden")){const e=getComputedStyle(t).display;"none"!==e&&t.setAttribute("data-pac-orig-display",e),t.style.display="none",t.setAttribute("data-pac-hidden","true")}},l.prototype.applyClassBinding=function(t,e){"object"!=typeof e||null===e?"string"==typeof e&&(t.className=e):Object.keys(e).forEach(n=>{e[n]?t.classList.add(n):t.classList.remove(n)})},l.prototype.applyStyleBinding=function(t,e){if("object"!=typeof e||null===e||Array.isArray(e))"string"==typeof e&&(t.style.cssText=e);else for(const n in e)null!=e[n]&&(n.startsWith("--")?t.style.setProperty(n,e[n]):t.style[n]=e[n])},l.prototype.applyAttributeBinding=function(t,e,n){"enable"===e?t.toggleAttribute("disabled",!n):i.includes(e)?t.toggleAttribute(e,!!n):null!=n?t.setAttribute(e,n):t.removeAttribute(e)},h.prototype.destroy=function(){this.container.removeEventListener("pac:event",this.boundHandlePacEvent),this.container.removeEventListener("pac:change",this.boundHandlePacEvent),this.container.removeEventListener("pac:array-change",this.boundHandlePacEvent),this.container.removeEventListener("pac:browser-state",this.boundHandlePacEvent),this.container.removeEventListener("pac:focus-state",this.boundHandlePacEvent),this.boundHandlePacEvent=null},h.prototype.debounce=function(t,e){let n;return function(...i){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),t(...i)},e)}},h.prototype.setupContainerScrollTracking=function(){requestAnimationFrame(()=>this.updateContainerScrollState());const t=this.debounce(()=>{this.updateContainerScrollState()},16);this.container.addEventListener("scroll",t,{passive:!0}),this.containerScrollHandler=t},h.prototype.updateContainerScrollState=function(){const t=this.container.scrollLeft,e=this.container.scrollTop,n=this.container.clientWidth,i=this.container.clientHeight,r=this.container.scrollWidth,a=this.container.scrollHeight,o=r>this.abstraction.containerWidth||a>this.abstraction.containerHeight;this.abstraction.containerScrollX=t,this.abstraction.containerScrollY=e,this.abstraction.containerScrollContentWidth=r,this.abstraction.containerScrollContentHeight=a,this.abstraction.containerIsScrollable=o,Object.assign(this.abstraction.containerScrollWindow,{top:e,left:t,right:t+n,bottom:e+i,x:t,y:e})},h.prototype.updateContainerVisibility=function(){const t=a.domRectToSimpleObject(this.container.getBoundingClientRect());this.abstraction.containerClientRect=t,this.abstraction.containerWidth=t.width,this.abstraction.containerHeight=t.height,this.abstraction.containerVisible=a.isElementVisible(this.container),this.abstraction.containerFullyVisible=a.isElementFullyVisible(this.container)},h.prototype.scanAndRegisterNewElements=function(t){const e=this,n=this.scanBindings(t),i=this.scanTextBindings(t);n.forEach((e,n)=>{n!==t&&this.interpolationMap.set(n,e)}),i.forEach((t,e)=>{this.textInterpolationMap.set(e,t)}),n.forEach((n,i)=>{const{bindings:r}=n;if(r.foreach&&i!==t){const t=a.uniqid("foreach");i.setAttribute("data-pac-foreach-id",t);const o=r.foreach.target,s=this.inferArrayRoot(o);i.setAttribute("data-pac-array",s),Object.assign(n,{foreachExpr:r.foreach.target,sourceArray:s,foreachId:t,depth:e.calculateForEachDepth(i),template:i.innerHTML,itemVar:i.getAttribute("data-pac-item")||"item",indexVar:i.getAttribute("data-pac-index")||"index"})}}),n.forEach((t,n)=>{Object.keys(t.bindings).forEach(i=>{const r=t.bindings[i];e.domUpdater.updateAttributeBinding(n,i,r)})}),i.forEach((t,n)=>{e.domUpdater.updateTextNode(n,t.template)}),Array.from(n.entries()).filter(([e,n])=>n.bindings.foreach&&e!==t).sort(([,t],[,e])=>{const n=t.depth;return e.depth-n}).forEach(([t])=>{this.renderForeach(t)})},h.prototype.getDependencies=function(){const t=new Map,e=this.originalAbstraction.computed||{},n=new Set,i=new Proxy(this.originalAbstraction,{get:(t,e)=>("string"==typeof e&&n.add(e),t[e])});return Object.keys(e).forEach(r=>{n.clear(),e[r].call(i),n.forEach(e=>{t.has(e)||t.set(e,[]),t.get(e).push(r)})}),t},h.prototype.inferArrayRoot=function(t){for(const[e,n]of this.dependencies){const i=this.abstraction[e],r=Array.isArray(i);if(n.includes(t)&&r)return e}return t},h.prototype.handleAttributeChanges=function(t,e){const n=this,i=t.detail.path[0];this.interpolationMap.forEach((r,a)=>{const{bindings:o}=r;Object.keys(o).forEach(r=>{if(["foreach","click"].includes(r))return;const s=o[r];let c=s.dependencies.some(n=>e.includes(n)||t.detail.path.join(".").startsWith(n+".")||t.detail.path.join(".").startsWith(n+"["));if(!c){const t=a.closest("[data-pac-foreach-id]");if(t){const e=n.interpolationMap.get(t);e&&e.sourceArray===i&&(c=!0)}}c&&n.domUpdater.updateAttributeBinding(a,r,s)})})},h.prototype.handleTextInterpolation=function(t,e){const n=this,i=t.detail.path[0];n.textInterpolationMap.forEach((r,a)=>{let o=r.dependencies.some(n=>e.includes(n)||t.detail.path.join(".").startsWith(n+".")||t.detail.path.join(".").startsWith(n+"["));if(!o){const t=a.parentElement?.closest("[data-pac-foreach-id]");if(t){const e=n.interpolationMap.get(t);e&&e.sourceArray===i&&(o=!0)}}o&&n.domUpdater.updateTextNode(a,r.template)})},h.prototype.handleEvent=function(t){switch(t.type){case"pac:event":this.handlePacEvent(t);break;case"pac:array-change":this.handleArrayChange(t);break;case"pac:change":this.handleReactiveChange(t);break;case"pac:browser-state":this.handleBrowserState(t);break;case"pac:focus-state":this.handleFocusState(t)}},h.prototype.handlePacEvent=function(t){switch(t.detail.message){case 513:case 519:case 516:case 257:case 256:break;case 514:case 520:case 517:this.handleDomClicks(t);break;case 770:this.handleDomSubmit(t);break;case 769:case 768:this.handleDomChange(t)}},h.prototype.handleDomClicks=function(t){const e=this.interpolationMap.get(t.detail.target);if(!e?.bindings?.click)return;const n=this.abstraction[e.bindings.click.target];if("function"==typeof n)try{const e=this.extractClosestForeachContext(t.detail.target);if(!e)return void n.call(this.abstraction,t);const i=Array.from(this.interpolationMap.entries()).find(([,t])=>t.foreachId===e.foreachId)?.[0];if(!i)return void n.call(this.abstraction,t);const r=this.interpolationMap.get(i),a={resolveScopedPath:t=>this.resolveScopedPath(t,i)},o=s.evaluate(c.parseExpression(r.foreachExpr),this.abstraction,a);n.call(this.abstraction,o[e.index],e.index,t)}catch(t){}},h.prototype.handleDomSubmit=function(t){const e=this.interpolationMap.get(t.detail.target);if(!e?.bindings?.submit)return;const n=this.abstraction[e.bindings.submit.target];if("function"==typeof n)try{n.call(this.abstraction,t)}catch(t){}},h.prototype.handleDomChange=function(t){const e=this,n=t.detail.target,i=this.interpolationMap.get(n);if(i){if(i.bindings.value){const r=i.bindings.value,o=e.resolveScopedPath(r.target,n);a.setNestedProperty(o,t.detail.value,this.abstraction)}if(i.bindings.checked){const r=i.bindings.checked,o=e.resolveScopedPath(r.target,n);"checkbox"===n.type?a.setNestedProperty(o,t.detail.target.checked,this.abstraction):"radio"===n.type&&t.detail.target.checked&&a.setNestedProperty(o,t.detail.value,this.abstraction)}}},h.prototype.handleReactiveChange=function(t){const e=a.pathArrayToString(t.detail.path),n=[e];this.dependencies.has(e)&&n.push(...this.dependencies.get(e));const i=t.detail.path[0];this.dependencies.has(i)&&n.push(...this.dependencies.get(i)),this.handleTextInterpolation(t,n),this.handleAttributeChanges(t,n),n.forEach(n=>{if(n===e&&t.detail.path.length>1)return;const i="function"==typeof this.abstraction.computed?.[n],r=1===t.detail.path.length&&Array.isArray(this.abstraction[n]);(i||r)&&this.findForeachElementsByArrayPath(n).forEach(t=>{this.shouldRebuildForeach(t)&&this.renderForeach(t)})})},h.prototype.handleBrowserState=function(t){const{stateType:e,stateData:n}=t.detail;switch(e){case"visibility":this.abstraction.browserVisible=n.visible;break;case"online":this.abstraction.browserOnline=n.online,this.abstraction.browserNetworkEffectiveType=n.networkType;break;case"scroll":this.abstraction.browserScrollX=n.scrollX,this.abstraction.browserScrollY=n.scrollY;break;case"resize":this.abstraction.browserViewportWidth=n.viewportWidth,this.abstraction.browserViewportHeight=n.viewportHeight,this.abstraction.browserDocumentWidth=n.documentWidth,this.abstraction.browserDocumentHeight=n.documentHeight,this.abstraction.browserScrollX=n.scrollX,this.abstraction.browserScrollY=n.scrollY,this.updateContainerVisibility()}},h.prototype.handleFocusState=function(t){this.abstraction.containerFocus=t.detail.containerFocus,this.abstraction.containerFocusWithin=t.detail.containerFocusWithin},h.prototype.handleArrayChange=function(t){const e=a.pathArrayToString(t.detail.path);this.findForeachElementsByArrayPath(e).forEach(t=>{this.renderForeach(t)})},h.prototype.scanBindings=function(t){const e=this,n=new Map;return t.querySelectorAll("[data-pac-bind]").forEach(t=>{if(n.has(t))return;if(!a.belongsToPacContainer(e.container,t))return;const i=t.getAttribute("data-pac-bind"),r=s.parseBindingString(i),o={};r.forEach(t=>{o[t.type]={target:t.target,dependencies:this.extractDependencies(t.target)}}),n.set(t,{bindingString:i,bindings:o})}),n},h.prototype.scanTextBindings=function(t){const n=new Map,i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:t=>e.test(t.textContent)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});let r;for(;r=i.nextNode();)n.has(r)||a.belongsToPacContainer(this.container,r)&&n.set(r,{template:r.textContent,dependencies:this.extractInterpolationDependencies(r.textContent)});return n},h.prototype.extractInterpolationDependencies=function(e){const n=new Set;return e.replace(t,(t,e)=>(this.extractDependencies(e.trim()).forEach(t=>n.add(t)),t)),Array.from(n)},h.prototype.extractDependencies=function(t){try{const e=c.parseExpression(t);return e?.dependencies||[]}catch(t){return[]}},h.prototype.createReactiveAbstraction=function(){const t=this;this.injectSystemProperties(this.originalAbstraction);const e=function(t,e){const n=["push","pop","shift","unshift","splice","sort","reverse"];return t&&"object"==typeof t?function t(i,r){return r=r||[],new Proxy(i,{get:function(i,a){const o=i[a];if(Array.isArray(i)&&"function"==typeof o&&n.includes(a))return function(){if("push"===a||"unshift"===a)for(let e=0;e<arguments.length;e++)arguments[e]&&"object"==typeof arguments[e]&&!arguments[e]._isReactive&&(arguments[e]=t(arguments[e],r.concat([i.length+e])),arguments[e]._isReactive=!0);else if("splice"===a&&arguments.length>2)for(let e=2;e<arguments.length;e++)arguments[e]&&"object"==typeof arguments[e]&&!arguments[e]._isReactive&&(arguments[e]=t(arguments[e],r.concat([arguments[0]+e-2])),arguments[e]._isReactive=!0);const n=Array.prototype.slice.call(i),o=Array.prototype[a].apply(i,arguments),s=Array.prototype.slice.call(i);return e.dispatchEvent(new CustomEvent("pac:array-change",{detail:{path:r,oldValue:n,newValue:s,method:a}})),o};const s=Object.getOwnPropertyDescriptor(i,a);if(s&&s.get&&!s.set)return o;if("function"==typeof o)return o;if(o&&"object"==typeof o&&!o._isReactive){const e=t(o,r.concat([a]));return e._isReactive=!0,i[a]=e,e}return o},set:function(n,i,a){const o=n[i],s=r.concat([i]);return o===a||(a&&"object"==typeof a?(n[i]=t(a,s),n[i]._isReactive=!0):n[i]=a,Array.isArray(a)&&e.dispatchEvent(new CustomEvent("pac:array-change",{detail:{path:s,oldValue:o,newValue:n[i],method:"assignment"}})),e.dispatchEvent(new CustomEvent("pac:change",{detail:{path:s,oldValue:o,newValue:n[i]}}))),!0}})}(t,[]):t}(this.originalAbstraction,this.container);Object.keys(this.originalAbstraction).forEach(function(n){"function"==typeof t.originalAbstraction[n]&&"computed"!==n&&(e[n]=t.originalAbstraction[n].bind(e))});const n=this.originalAbstraction.computed||{};return Object.keys(n).forEach(function(t){Object.defineProperty(e,t,{get:function(){return n[t].call(e)},enumerable:!0,configurable:!0})}),e},h.prototype.injectSystemProperties=function(t){t.browserOnline=navigator.onLine,t.browserNetworkEffectiveType=a.getNetworkEffectiveType(),t.browserVisible=!document.hidden,t.browserScrollX=window.scrollX,t.browserScrollY=window.scrollY,t.browserViewportHeight=window.innerHeight,t.browserViewportWidth=window.innerWidth,t.browserDocumentWidth=document.documentElement.scrollWidth,t.browserDocumentHeight=document.documentElement.scrollHeight,t.containerIsScrollable=!1,t.containerScrollX=this.container.scrollLeft,t.containerScrollY=this.container.scrollTop,t.containerScrollContentWidth=this.container.scrollWidth,t.containerScrollContentHeight=this.container.scrollHeight,t.containerScrollWindow={top:0,left:0,right:0,bottom:0,x:0,y:0},t.containerFocus=a.isElementDirectlyFocused(this.container),t.containerFocusWithin=a.isElementFocusWithin(this.container),t.containerVisible=a.isElementVisible(this.container),t.containerFullyVisible=a.isElementFullyVisible(this.container),t.containerClientRect={top:0,left:0,right:0,bottom:0,width:0,height:0,x:0,y:0},t.containerWidth=this.container.clientWidth,t.containerHeight=this.container.clientHeight},h.prototype.calculateForEachDepth=function(t){let e=0,n=t.parentElement;for(;n&&n!==this.container;)n.hasAttribute("data-pac-bind")&&n.getAttribute("data-pac-bind").includes("foreach:")&&e++,n=n.parentElement;return e},h.prototype.findParentForeachElement=function(t){let e=t.parentElement;for(;e&&e!==this.container;){if(e.hasAttribute("data-pac-bind")&&e.getAttribute("data-pac-bind").includes("foreach:"))return e;e=e.parentElement}return null},h.prototype.renderForeach=function(t){const e=this.interpolationMap.get(t);if(!e||!e.foreachId)return;this.cleanupForeachMaps(t);const n={resolveScopedPath:e=>this.resolveScopedPath(e,t)};try{const i=s.evaluate(c.parseExpression(e.foreachExpr),this.abstraction,n);if(!i)return;if(!Array.isArray(i))return void(t.innerHTML="");const r=this.getSourceArrayForFiltered(e.foreachExpr,i);t._pacPreviousArray=i,t.innerHTML="",i.forEach((n,i)=>{const a=this.findOriginalIndex(n,r,i);t.innerHTML+=`\x3c!-- pac-foreach-item: ${e.foreachId}, index=${a}, renderIndex=${i} --\x3e`+e.template+"\x3c!-- /pac-foreach-item --\x3e"}),this.scanAndRegisterNewElements(t)}catch(t){}},h.prototype.getSourceArrayForFiltered=function(t,e){if(this.originalAbstraction.computed&&this.originalAbstraction.computed[t]){const e=this.dependencies.get(t)||[];for(const t of e){const e=this.abstraction[t];if(Array.isArray(e))return e}}return Array.isArray(this.abstraction[t])?this.abstraction[t]:e},h.prototype.findOriginalIndex=function(t,e,n){for(let n=0;n<e.length;n++)if(e[n]===t)return n;if(t&&"object"==typeof t&&void 0!==t.id)for(let n=0;n<e.length;n++){const i=e[n];if(i&&"object"==typeof i&&i.id===t.id)return n}for(let n=0;n<e.length;n++)if(a.isEqual(e[n],t))return n;return n},h.prototype.resolveScopedPath=function(t,e){if(!t.includes("."))return t;const n=this.findForeachElementForScopedPath(t,e);if(!n)return t;const i=this.interpolationMap.get(n);if(!i||!i.bindings||!i.bindings.foreach)return t;const r=this.extractIndexFromComments(e,i.foreachId);if(null===r)return t;const a=t.substring(i.itemVar.length+1);return this.resolveArrayExpression(i.bindings.foreach.target,n,e)+"["+r+"]"+(a?"."+a:"")},h.prototype.shouldRebuildForeach=function(t){const e=this.interpolationMap.get(t);if(!e)return!1;const n={resolveScopedPath:e=>this.resolveScopedPath(e,t)},i=s.evaluate(c.parseExpression(e.foreachExpr),this.abstraction,n);if(!Array.isArray(i))return!1;const r=t._pacPreviousArray;if(!r)return!0;if(i.length!==r.length)return!0;for(let t=0;t<i.length;t++)if(i[t]!==r[t])return!0;return!1},h.prototype.findForeachElementForScopedPath=function(t,e){const n=t.split(".")[0];let i=e.nodeType===Node.TEXT_NODE?e.parentElement:e;for(;i&&i!==this.container;){const t=this.interpolationMap.get(i);if(t&&t.bindings&&t.bindings.foreach&&t.itemVar===n)return i;i=i.parentElement}return null},h.prototype.findForeachElementsByArrayPath=function(t){const e=[];for(const[n,i]of this.interpolationMap)i.bindings&&i.bindings.foreach&&(i.foreachExpr!==t&&i.sourceArray!==t||e.push(n));return e},h.prototype.extractClosestForeachContext=function(t){let e=t;for(;e&&e!==this.container;){let t=e.previousSibling;for(;t;){if(t.nodeType===Node.COMMENT_NODE){const e=t.textContent.trim().match(n);if(e)return{foreachId:e[1].trim(),index:parseInt(e[2],10),renderIndex:parseInt(e[3],10)}}t=t.previousSibling}e=e.parentElement}return null},h.prototype.extractIndexFromComments=function(t,e){let i=t.nodeType===Node.TEXT_NODE?t.parentElement:t;for(;i&&i!==this.container;){let t=i.previousSibling;for(;t;){if(t.nodeType===Node.COMMENT_NODE){const i=t.textContent.trim().match(n);if(i&&i[1].trim()===e)return parseInt(i[2],10)}t=t.previousSibling}i=i.parentElement}return null},h.prototype.resolveArrayExpression=function(t,e,n){if(!t.includes("."))return t;const i=this.findParentForeachElement(e);if(!i)return t;const r=this.interpolationMap.get(i);if(!r||!r.bindings.foreach)return t;if(t.startsWith(r.itemVar+".")){const e=this.extractIndexFromComments(n,r.foreachId);if(null!==e){const a=this.resolveArrayExpression(r.foreachExpr,i,n);return t.replace(r.itemVar+".",a+"["+e+"].")}}return t},h.prototype.cleanupForeachMaps=function(t){const e=[],n=[];this.interpolationMap.forEach((n,i)=>{t.contains(i)&&i!==t&&e.push(i)}),this.textInterpolationMap.forEach((e,i)=>{t.contains(i)&&n.push(i)}),e.forEach(t=>{this.interpolationMap.delete(t)}),n.forEach(t=>{this.textInterpolationMap.delete(t)})},window.PACRegistry=window.PACRegistry||new function(){this.components=new Map,this.register=function(t,e){this.components.set(t,e)},this.unregister=function(t){this.components.delete(t)}},window.wakaPAC=function(t,e,n){o.initialize();const i=document.querySelector(t);if(!i)throw new Error(`Container not found: ${t}`);const r={selector:t,container:i,config:Object.assign({updateMode:"immediate",delay:300},n),context:new h(i,e),initialize:function(){return this}},a=r.initialize();return window.PACRegistry.register(t,r),a.context.abstraction}}();
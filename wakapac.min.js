!function(){"use strict";const e=/\{\{\s*([^}]+)\s*}}/g,t=/\{\{.*?}}/,n=/pac-foreach-item:\s*([^,]+),\s*index=(\d+),\s*renderIndex=(\d+)/,r=/^\s*wp-if:\s*(.+?)\s*$/,i=/^\s*\/wp-if\s*$/,o=/[.[\]]+/,a=["readonly","required","selected","checked","hidden","multiple","autofocus","disabled","async","defer","formnovalidate","ismap","novalidate","open","reversed","scoped","seamless","truespeed"],s=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Home","End","PageUp","PageDown","Insert","Delete","NumpadEnter","NumpadDivide","MetaLeft","MetaRight","ContextMenu"]),c=new Set(["text","search","url","tel","email","password","number"]),l=new Set(["checkbox","radio","color","range","date","datetime-local","month","week","time"]);let h=null;const u=512,d=513,p=514,f=515,g=517,m=520,y=528,E=529,b=530,v=769,C=770,_=772,w=773,T=774,A=522,M=1<<25,P=1<<26,S=1<<29,N={uniqid:(e="",t=!1)=>`${e}${(1e3*Date.now()+1e3*Math.random()).toString(16).padEnd(14,"0")}${t?`.${Math.trunc(1e8*Math.random())}`:""}`,setNestedProperty(e,t,n){const r=e.split(o).filter(Boolean);for(let e=0;e<r.length-1;e++){const t=r[e],i=r[e+1];t in n||(n[t]=/^\d+$/.test(i)?[]:{}),n=n[t]}n[r[r.length-1]]=t},getElementIdentifier(e){if(e.id)return e.id;if(e.hasAttribute("data-pac-element-id"))return e.getAttribute("data-pac-element-id");const t=N.uniqid("pac-el-");return e.setAttribute("data-pac-element-id",t),t},pathStringToArray:e=>Array.isArray(e)?e:String(e).split(o).filter(Boolean),pathArrayToString(e){if(0===e.length)return"";let t=String(e[0]);for(let n=1;n<e.length;++n){const r=e[n];"number"==typeof r||/^\d+$/.test(String(r))?t+=`[${r}]`:t+=`.${r}`}return t},belongsToPacContainer(e,t){if(!(e instanceof Element&&e.hasAttribute("data-pac-id")))return!1;const n=!t||t.nodeType!==Node.TEXT_NODE&&t.nodeType!==Node.COMMENT_NODE?t:t.parentElement;return n instanceof Element&&!!e.contains(n)&&n.closest("[data-pac-id]")===e},isElementVisible(e){const t=e.getBoundingClientRect(),n=window.innerHeight,r=window.innerWidth;return t.top<n&&t.bottom>0&&t.left<r&&t.right>0},isElementFullyVisible(e){const t=e.getBoundingClientRect(),n=window.innerHeight,r=window.innerWidth;return t.top>=0&&t.left>=0&&t.bottom<=n&&t.right<=r},isElementDirectlyFocused:e=>e===document.activeElement,isElementFocusWithin:e=>e===document.activeElement||e.contains(document.activeElement),domRectToSimpleObject:e=>({top:e.top,left:e.left,right:e.right,bottom:e.bottom,width:e.width,height:e.height,x:e.x,y:e.y}),getNetworkEffectiveType:()=>"connection"in navigator&&navigator.connection?.effectiveType?navigator.connection.effectiveType:"4g",detectNetworkQuality(){if(!navigator.onLine)return"offline";switch(this.getNetworkEffectiveType()){case"slow-2g":case"2g":case"3g":return"slow";default:return"fast"}},formatValue:e=>null!==e?String(e):"",sanitizeUserInput(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML},escapeHTML:e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),isEqual(e,t){if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t||"object"!=typeof e||"object"!=typeof t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every((e,n)=>this.isEqual(e,t[n]));const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(n=>Object.hasOwn(t,n)&&this.isEqual(e[n],t[n]))},djb2Hash(e){let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n),t&=4294967295;return(t>>>0).toString(16)},buildCachedKeyNames(){const e={};for(const t in L)t.startsWith("VK_")&&(e[L[t]]=t);return e},getKeyName(e){return null===h&&(h=this.buildCachedKeyNames()),Object.prototype.hasOwnProperty.call(h,e)?h[e]:e>=48&&e<=57||e>=65&&e<=90?String.fromCharCode(e):"0x"+e.toString(16).toUpperCase().padStart(2,"0")},computeInputDelta(e){const t=e.inputType||"",n=e.data;return t.startsWith("insert")?"string"==typeof n?n.length:1:t.startsWith("delete")?-1:0},getDeletedTextFromTextControl(e,t){const n=e.selectionStart,r=e.selectionEnd;return null==n||null==r?"":n!==r?e.value.slice(n,r):"backward"===t&&n>0?e.value.slice(n-1,n):"forward"===t&&n<e.value.length?e.value.slice(n,n+1):""},getDeleteDirection:e=>e?e.includes("Backward")?"backward":e.includes("Forward")?"forward":null:null,getNormalizedSelectionRange(e){const t=e.selectionStart,n=e.selectionEnd;return null==t||null==n?null:{start:Math.min(t,n),end:Math.max(t,n)}}};const x={_initialized:!1,_captureActive:!1,_hoveredContainer:null,_capturedContainer:null,_intersectionObserver:null,_resizeObserver:null,_repeatCounts:new Map,initialize(){this._initialized||(this._initialized=!0,this._setupBrowserStateEvents(),this._setupFocusEvents(),this._setupMouseEvents(),this._setupTouchEvents(),this._setupKeyboardEvents(),this._setupFormEvents(),this._setupWindowEvents(),this._setupObservers())},_setupBrowserStateEvents(){const e=this;document.addEventListener("visibilitychange",function(){e.dispatchBrowserStateEvent("visibility",{visible:!document.hidden})}),window.addEventListener("online",function(){e.dispatchBrowserStateEvent("online",{online:!0,networkType:N.getNetworkEffectiveType(),networkQuality:N.detectNetworkQuality()})}),window.addEventListener("offline",function(){e.dispatchBrowserStateEvent("online",{online:!1,networkType:N.getNetworkEffectiveType(),networkQuality:N.detectNetworkQuality()})}),"connection"in navigator&&navigator.connection&&navigator.connection.addEventListener("change",function(){e.dispatchBrowserStateEvent("online",{online:navigator.onLine,networkType:N.getNetworkEffectiveType(),networkQuality:N.detectNetworkQuality()})})},_setupFocusEvents(){const e=this;document.addEventListener("focusin",function(t){const n=e.getContainerForEvent(7,t),r=e.wrapDomEventAsMessage(7,t);e.dispatchToContainer(n,r)}),document.addEventListener("focusout",function(t){const n=e.getContainerForEvent(8,t),r=e.wrapDomEventAsMessage(8,t);e.dispatchToContainer(n,r)})},_setupMouseEvents(){this._setupMouseButtonEvents(),this._setupMouseMoveEvent(),this._setupMouseWheelEvent(),this._setupClipboardEvents(),this._setupDragPrevention(),this._setupDocumentLeave()},_setupMouseButtonEvents(){const e=this;document.addEventListener("mousedown",function(t){const n={0:d,1:519,2:516}[t.button];if(!n)return;2===t.button&&k.startRecording(t);const r=e.getContainerForEvent(n,t);e.dispatchMouseMessage(n,t,r)}),window.addEventListener("mouseup",function(t){const n={0:p,1:m,2:g}[t.button];if(!n)return;2===t.button&&k.isRecording&&k.stopRecording(t);const r=e.getContainerForEvent(n,t);e.dispatchMouseMessage(n,t,r)}),document.addEventListener("click",function(t){const n=e.getContainerForEvent(y,t);e.dispatchMouseMessage(y,t,n)}),document.addEventListener("auxclick",function(t){if(1===t.button){const n=e.getContainerForEvent(E,t);e.dispatchMouseMessage(E,t,n)}}),document.addEventListener("contextmenu",function(t){if(k.gestureJustDispatched)return k.gestureJustDispatched=!1,void t.preventDefault();const n=e.getContainerForEvent(b,t);e.dispatchMouseMessage(b,t,n)}),document.addEventListener("dblclick",function(t){if(0===t.button){const n=e.getContainerForEvent(f,t);e.dispatchMouseMessage(f,t,n)}})},_setupMouseMoveEvent(){const e=this;this.setupMoveCoalescer("mousemove",L.mouseMoveThrottleFps,t=>{k.isRecording&&k.recordPoint(t);const n=e._hoveredContainer,r=e.getContainerForEvent(u,t);n!==r&&(e.hasCapture()||(n&&e.dispatchMouseMessage(524,t,n),r&&e.dispatchMouseMessage(523,t,r)),e._hoveredContainer=r),r&&e.dispatchMouseMessage(u,t,r)})},_setupMouseWheelEvent(){const e=this;document.addEventListener("wheel",function(t){const n=e.getContainerForEvent(A,t),r=e.getModifierState(t),i=e.buildWheelWParam(t.deltaY,r),o=e.buildMouseLParam(t,n),a=e.wrapDomEventAsMessage(A,t,i,o,{wheelDelta:t.deltaY,wheelDeltaX:t.deltaX,deltaMode:t.deltaMode});e.dispatchToContainer(n,a)},{passive:!1})},_setupClipboardEvents(){const e=this;document.addEventListener("copy",function(t){const n=e.getContainerForEvent(w,t),r=window.getSelection().toString(),i=r.length,o=e.getModifierState(t),a=e.wrapDomEventAsMessage(w,t,i,o,{selectedText:r,copyData:null});if(e.dispatchToContainer(n,a),a.detail.copyData&&!t.defaultPrevented){t.preventDefault();for(const e in a.detail.copyData)t.clipboardData.setData(e,a.detail.copyData[e])}}),document.addEventListener("paste",function(t){const n=e.getContainerForEvent(T,t),r=t.clipboardData,i=r.getData("text/plain"),o=i.length,a=e.getModifierState(t),s=Array.from(r.files).map(function(e){return{name:e.name,size:e.size,type:e.type}}),c=e.wrapDomEventAsMessage(T,t,o,a,{text:i,html:r.getData("text/html"),files:s});e.dispatchToContainer(n,c)})},_setupDragPrevention(){document.addEventListener("dragstart",e=>{this.hasCapture()&&e.preventDefault()})},_setupDocumentLeave(){const e=this;document.addEventListener("mouseleave",function(t){null===t.relatedTarget&&(e.hasCapture()||e._hoveredContainer&&(e.dispatchMouseMessage(524,t,e._hoveredContainer),e._hoveredContainer=null))},!0)},_setupTouchEvents(){const e=this,t={touchstart:d,touchend:p,touchcancel:p};Object.entries(t).forEach(([t,n])=>{document.addEventListener(t,function(t){const r=e.getContainerForEvent(n,t);e.dispatchMouseMessage(n,t,r)})}),this.setupMoveCoalescer("touchmove",L.mouseMoveThrottleFps,t=>{if(t.touches.length>0){const n=e.getContainerForEvent(u,t);e.dispatchMouseMessage(u,t,n)}})},_setupKeyboardEvents(){const e=this;window.addEventListener("blur",function(t){e._repeatCounts.clear()}),document.addEventListener("keydown",function(t){e._updateRepeatState(t);const n=e.getContainerForEvent(256,t),r=e.buildKeyboardWParam(t),i=e.buildKeyboardLParam(t),o=e.wrapDomEventAsMessage(256,t,r,i,{key:t.key,code:t.code});if(e.dispatchToContainer(n,o),t.key&&1===t.key.length){const r=t.key.charCodeAt(0),o=e.wrapDomEventAsMessage(768,t,r,i);e.dispatchToContainer(n,o)}}),document.addEventListener("keyup",function(t){e._updateRepeatState(t);const n=e.getContainerForEvent(257,t),r=e.buildKeyboardWParam(t),i=e.buildKeyboardLParam(t),o=e.wrapDomEventAsMessage(257,t,r,i,{key:t.key,code:t.code});e.dispatchToContainer(n,o)})},_setupFormEvents(){const e=this;document.addEventListener("change",function(t){const n=t.target,r="SELECT"===n.tagName,i="INPUT"===n.tagName&&l.has(n.type);if(r||i){const i=e.getContainerForEvent(v,t),o=e.buildChangeWParam(t),a=0,s=e.wrapDomEventAsMessage(v,t,o,a,{elementType:r?"select":n.type});e.dispatchToContainer(i,s)}}),document.addEventListener("beforeinput",function(t){const n=t.target,r="INPUT"===n.tagName&&c.has(n.type),i="TEXTAREA"===n.tagName,o=!0===n.isContentEditable;if(r||i||o){const o=e.getContainerForEvent(771,t),a=r||i,s=N.getDeleteDirection(t.inputType),c=N.computeInputDelta(t),l=e.getModifierState(t);let h=null;c>0?h=t.data??t.dataTransfer?.getData("text/plain")??"":c<0&&(r||i)&&(h=N.getDeletedTextFromTextControl(n,s));const u=N.getNormalizedSelectionRange(n),d=e.wrapDomEventAsMessage(771,t,c,l,{inputType:t.inputType,elementType:n.tagName.toLowerCase(),text:h,selectionStart:a?u?.start??null:null,selectionEnd:a?u?.end??null:null});e.dispatchToContainer(o,d)}}),document.addEventListener("input",function(t){const n=t.target,r="INPUT"===n.tagName&&c.has(n.type),i="INPUT"===n.tagName&&"range"===n.type,o="TEXTAREA"===n.tagName,a=!0===n.isContentEditable;if(r||i||o||a){const a=e.getContainerForEvent(_,t),s=r||o||i?n.value:n.textContent??"",c=s.length,l=e.getModifierState(t),h=e.wrapDomEventAsMessage(_,t,c,l,{inputType:t.inputType??null,elementType:n.tagName.toLowerCase(),value:s});e.dispatchToContainer(a,h)}}),document.addEventListener("submit",function(t){const n=t.target,r=new FormData(n),i=e.getContainerForEvent(C,t),o=t.submitter,a=e.wrapDomEventAsMessage(C,t,0,0,{entries:Object.fromEntries(r.entries()),action:n.action,method:n.method.toUpperCase(),enctype:n.enctype,name:n.getAttribute("name"),isValid:n.checkValidity(),submitter:o?{name:o.name,value:o.value,id:o.id}:null,files:Array.from(n.elements).filter(e=>"file"===e.type&&e.files.length>0).reduce((e,t)=>(e[t.name]=Array.from(t.files).map(e=>({name:e.name,size:e.size,type:e.type})),e),{}),multiEntries:Array.from(new Set(Array.from(r.keys()).filter(e=>r.getAll(e).length>1))).reduce((e,t)=>(e[t]=r.getAll(t),e),{})});e.dispatchToContainer(i,a)})},_setupWindowEvents(){const e=this;this.setupMoveCoalescer("window.scroll",60,function(){e.dispatchBrowserStateEvent("scroll",{scrollX:window.scrollX,scrollY:window.scrollY})}),this.setupMoveCoalescer("window.resize",60,function(){e.dispatchBrowserStateEvent("resize",{viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,documentWidth:document.documentElement.scrollWidth,documentHeight:document.documentElement.scrollHeight,scrollX:window.scrollX,scrollY:window.scrollY})})},_setupObservers(){const e=this;this._intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{const t=window.PACRegistry.getByElement(e.target);if(t&&t.abstraction){const n=e.boundingClientRect;t.abstraction.containerVisible=e.isIntersecting,t.abstraction.containerFullyVisible=e.intersectionRatio>=.99,t.abstraction.containerClientRect=N.domRectToSimpleObject(n)}})},{threshold:[0,1]}),this._resizeObserver=new ResizeObserver(t=>{t.forEach(t=>{const n=t.target,r=window.PACRegistry.getByElement(n);if(r&&r.abstraction){const i=Math.round(t.contentRect.width),o=Math.round(t.contentRect.height);let a;r.abstraction.containerWidth=i,r.abstraction.containerHeight=o,a=0===i&&0===o?1:document.fullscreenElement===n?2:0;const s=a,c=e.makeLParam(i,o),l=e.wrapDomEventAsMessage(5,null,s,c,{width:i,height:o,contentRect:N.domRectToSimpleObject(t.contentRect),borderBoxSize:t.borderBoxSize,contentBoxSize:t.contentBoxSize});e.dispatchToContainer(n,l)}})})},_updateRepeatState(e){const t=e.code;"keyup"!==e.type?e.repeat?this._repeatCounts.set(t,this._getRepeatCount(e)+1):this._repeatCounts.set(t,1):this._repeatCounts.delete(t)},_getRepeatCount(e){return this._repeatCounts&&this._repeatCounts.get(e.code)||1},_getPreviousKeyState:e=>"keyup"===e.type||e.repeat?1:0,observeContainer(e){this._intersectionObserver.observe(e),this._resizeObserver.observe(e)},unObserveContainer(e){this._resizeObserver.unobserve(e),this._intersectionObserver.unobserve(e)},setupMoveCoalescer(e,t,n){let r=0,i=null,o=!1;const a=t>0?1e3/t:0;let s=document,c=e;if(-1!==e.indexOf(".")){const[t,n]=e.split(".");switch(c=n,t){case"window":s=window;break;case"document":s=document;break;case"body":s=document.body;break;default:return}}s.addEventListener(c,e=>{i=e,o||(o=!0,requestAnimationFrame(e=>{(0===a||e-r>=a)&&(n(i),r=e),o=!1}))})},wrapDomEventAsMessage(e,t,n=0,r=0,i={}){const o=new CustomEvent("pac:event",{bubbles:!0,cancelable:!0,detail:i});return Object.defineProperties(o,{message:{value:e,enumerable:!0,configurable:!0},wParam:{value:n,enumerable:!0,configurable:!0},lParam:{value:r,enumerable:!0,configurable:!0},timestamp:{value:Date.now(),enumerable:!0,configurable:!0},target:{value:t?.target,enumerable:!0,configurable:!0},originalEvent:{value:t,enumerable:!0,configurable:!0}}),t&&["preventDefault","stopPropagation","stopImmediatePropagation"].forEach(e=>{const n=o[e];o[e]=function(){n&&n.call(this),t[e]&&t[e].call(t)}}),o},getContainerForEvent(e,t){let n=t.target.closest("[data-pac-id]");return this._captureActive&&this.isCaptureAffected(e)&&(this._capturedContainer?.isConnected?n=this._capturedContainer:this.releaseCapture()),n},dispatchToContainer(e,t){e&&this.processEventModifiers(t.target,t)&&e.dispatchEvent(t)},dispatchMouseMessage(e,t,n,r={}){const i=this.buildMouseLParam(t,n),o=this.getModifierState(t),a=this.wrapDomEventAsMessage(e,t,i,o,r);this.dispatchToContainer(n,a)},dispatchBrowserStateEvent(e,t){window.PACRegistry.components.forEach(n=>{const r=new CustomEvent("pac:browser-state",{detail:{target:n.container,stateType:e,stateData:t,timestamp:Date.now()}});n.container.dispatchEvent(r)})},getModifierState(e){let t=0;return e.ctrlKey&&(t|=16),e.shiftKey&&(t|=8),e.altKey&&(t|=32),void 0!==e.buttons?(1&e.buttons&&(t|=1),2&e.buttons&&(t|=2),4&e.buttons&&(t|=4)):e.touches&&e.touches.length>0&&(t|=1),t},buildMouseLParam(e,t){if(!t)return 0;const n=e.touches?.[0]||e.changedTouches?.[0],r=n?n.clientX:e.clientX,i=n?n.clientY:e.clientY,o=t.getBoundingClientRect(),a=r-o.left,s=i-o.top;return this.makeLParam(a,s)},makeLParam(e,t){const n=Math.max(0,Math.min(65535,Math.round(e)));return Math.max(0,Math.min(65535,Math.round(t)))<<16|n},buildWheelWParam:(e,t)=>(65535&120*Math.sign(e))<<16|65535&t,buildKeyboardLParam(e){let t=0;return t|=65535&this._getRepeatCount(e),this.isExtendedKey(e.code)&&(t|=1<<24),e.shiftKey&&(t|=M),e.ctrlKey&&(t|=P),e.altKey&&(t|=S),this._getPreviousKeyState(e)&&(t|=1<<30),"keyup"===e.type&&(t|=1<<31),t},buildKeyboardWParam(e){const t=this.getVirtualKeyCode(e.code);return null!==t?t:e.keyCode||e.which||0},buildChangeWParam(e){const t=e.target;switch(t.type){case"checkbox":return t.checked?1:0;case"radio":{const e=document.querySelectorAll(`input[name="${t.name}"]`);return Array.from(e).indexOf(t)}default:return"selectedIndex"in t?t.selectedIndex:0}},isExtendedKey:e=>!!e&&s.has(e),getVirtualKeyCode:e=>({Backspace:8,Tab:9,Enter:13,ShiftLeft:16,ShiftRight:16,ControlLeft:17,ControlRight:17,AltLeft:18,AltRight:18,Pause:19,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,PrintScreen:44,Insert:45,Delete:46,Digit0:48,Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,MetaLeft:91,MetaRight:92,ContextMenu:93,Numpad0:96,Numpad1:97,Numpad2:98,Numpad3:99,Numpad4:100,Numpad5:101,Numpad6:102,Numpad7:103,Numpad8:104,Numpad9:105,NumpadMultiply:106,NumpadAdd:107,NumpadSubtract:109,NumpadDecimal:110,NumpadDivide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NumLock:144,ScrollLock:145,BrowserBack:166,BrowserForward:167,BrowserRefresh:168,BrowserStop:169,BrowserSearch:170,BrowserFavorites:171,BrowserHome:172,AudioVolumeMute:181,AudioVolumeDown:182,AudioVolumeUp:183,MediaTrackNext:176,MediaTrackPrevious:177,MediaStop:178,MediaPlayPause:179,Semicolon:186,Equal:187,Comma:188,Minus:189,Period:190,Slash:191,Backquote:192,BracketLeft:219,Backslash:220,BracketRight:221,Quote:222,IntlBackslash:226}[e]||null),processEventModifiers(e,t){if(!e||"function"!=typeof e.getAttribute)return!0;const n=e.getAttribute("data-pac-event");if(!n)return!0;const r=t.originalEvent||t,i=n.split(/\s+/),o="keyup"===r.type||"keydown"===r.type,a={enter:"Enter",escape:"Escape",esc:"Escape",space:" ",tab:"Tab",delete:"Delete",del:"Delete",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight"};for(const e of i){const t=e.toLowerCase();if("prevent"===t){r.preventDefault();continue}if("stop"===t){r.stopPropagation();continue}const n=a[t];if(n&&o&&r.key!==n)return!1}return!0},isCaptureAffected:e=>e===u||e===A||e===d||e===p||e===f||516===e||e===g||519===e||e===m||e===y||e===E||e===b,setCapture(e){return!!e?.isConnected&&(this.hasCapture()&&this._capturedContainer===e||(this.hasCapture()&&this.releaseCapture(),document.body.classList.add("pac-capture-active"),this._captureActive=!0,this._capturedContainer=e),!0)},releaseCapture(){if(this.hasCapture()){if(this._capturedContainer?.isConnected){const e=this._capturedContainer.getAttribute("data-pac-id");null!==e&&L.sendMessage(e,L.MSG_CAPTURECHANGED,0,0)}document.body.classList.remove("pac-capture-active"),this._captureActive=!1,this._capturedContainer=null}},hasCapture(){return this._captureActive}},R={tokens:[],currentToken:0,OPERATOR_PRECEDENCE:{"||":1,"&&":2,"===":6,"!==":6,"==":6,"!=":6,"<":7,">":7,"<=":7,">=":7,"+":8,"-":8,"*":9,"/":9,"%":9,"!":10,"unary-":10,"unary+":10},OPERATOR_TYPES:{"||":"logical","&&":"logical","===":"comparison","!==":"comparison","==":"comparison","!=":"comparison",">=":"comparison","<=":"comparison",">":"comparison","<":"comparison","+":"arithmetic","-":"arithmetic","*":"arithmetic","/":"arithmetic","%":"arithmetic"},parseExpression(e){return e=String(e).trim(),this.tokens=this.tokenize(e),this.currentToken=0,0===this.tokens.length?null:this.parseTernary()},tokenize(e){const t=[];let n=0;for(;n<e.length;){const r=e[n];if(/\s/.test(r)){n++;continue}if('"'===r||"'"===r){const r=this.tokenizeString(e,n);t.push(r.token),n=r.nextIndex;continue}if(/\d/.test(r)||"."===r&&/\d/.test(e[n+1])){const r=this.tokenizeNumber(e,n);t.push(r.token),n=r.nextIndex;continue}const i=/^(===|!==|==|!=|>=|<=|&&|\|\|)/.exec(e.slice(n));if(i){const e=i[1];t.push({type:"OPERATOR",value:e,precedence:this.getOperatorPrecedence(e)}),n+=e.length;continue}const o={"(":"LPAREN",")":"RPAREN","{":"LBRACE","}":"RBRACE","[":"LBRACKET","]":"RBRACKET",",":"COMMA",".":"DOT"};if(o[r])t.push({type:o[r],value:r}),n++;else{if("+-*/<>!?:%".includes(r)){const e=this.getOperatorPrecedence(r);let i;switch(r){case"?":i="QUESTION";break;case":":i="COLON";break;default:i="OPERATOR"}t.push({type:i,value:r,precedence:e}),n++;continue}if(/[a-zA-Z_$]/.test(r)){const r=this.tokenizeIdentifier(e,n);t.push(r.token),n=r.nextIndex;continue}n++}}return t},tokenizeString(e,t){const n=e[t];let r=t+1,i="";for(;r<e.length;){const t=e[r];if("\\"===t&&r+1<e.length){const o=e[r+1];o===n||"\\"===o?(i+=o,r+=2):(i+=t,r++)}else{if(t===n)return{token:{type:"STRING",value:i},nextIndex:r+1};i+=t,r++}}throw new Error(`Unterminated string literal starting at position ${t}: expected closing ${n}`)},tokenizeNumber(e,t){const n=/^(\d*\.?\d+(?:[eE][+-]?\d+)?)/.exec(e.slice(t));if(n)return{token:{type:"NUMBER",value:parseFloat(n[1])},nextIndex:t+n[1].length}},tokenizeIdentifier(e,t){const n=/^([a-zA-Z_$][a-zA-Z0-9_$]*)/.exec(e.slice(t));if(n){const e=n[1];return{token:{type:["true","false","null","undefined"].includes(e)?"KEYWORD":"IDENTIFIER",value:e},nextIndex:t+e.length}}},getOperatorPrecedence(e){return this.OPERATOR_PRECEDENCE[e]||0},parseTernary(){let e=this.parseBinaryWithPrecedence(1);if(this.match("QUESTION")){const t=this.parseTernary();return this.consume("COLON",'Expected ":" in ternary expression'),{type:"ternary",condition:e,trueValue:t,falseValue:this.parseTernary()}}return e},parseBinaryWithPrecedence(e){let t=this.parseUnary();for(;"OPERATOR"===this.peek().type;){const n=this.getOperatorPrecedence(this.peek().value);if(n<e)break;const r=this.advance().value,i=this.parseBinaryWithPrecedence(n+1);t={type:this.OPERATOR_TYPES[r]||"arithmetic",left:t,operator:r,right:i}}return t},parseUnary(){return this.matchOperator("!","-","+")?{type:"unary",operator:this.previous().value,operand:this.parseUnary()}:this.parsePrimary()},parsePrimary(){if(this.match("LPAREN")){const e=this.parseTernary();return this.consume("RPAREN","Expected closing parenthesis"),this.parsePostfixOperators({type:"parentheses",inner:e})}if(this.match("LBRACKET"))return this.parsePostfixOperators(this.parseArrayLiteral());if(this.match("LBRACE"))return this.parsePostfixOperators(this.parseObjectLiteral());if(this.check("STRING"))return this.parsePostfixOperators({type:"literal",value:this.advance().value});if(this.check("NUMBER"))return this.parsePostfixOperators({type:"literal",value:this.advance().value});if(this.check("KEYWORD")){let e;switch(this.advance().value){case"true":e=!0;break;case"false":e=!1;break;case"null":e=null;break;case"undefined":e=void 0}return this.parsePostfixOperators({type:"literal",value:e})}return this.check("IDENTIFIER")?this.parsePostfixOperators(this.parsePropertyAccess()):null},parsePostfixOperators(e){for(;;)if(this.match("LBRACKET")){const t=this.parseTernary();this.consume("RBRACKET","Expected closing bracket"),e={type:"index",object:e,index:t}}else{if(!this.match("DOT"))break;if(!this.check("IDENTIFIER"))throw new Error('Expected property name after "."');{const t=this.advance().value;if(this.match("LPAREN")){const n=this.parseArgumentList();this.consume("RPAREN","Expected closing parenthesis"),e={type:"methodCall",object:e,method:t,arguments:n}}else e={type:"member",object:e,property:t}}}return e},parseArgumentList(){const e=[];if(!this.check("RPAREN"))do{e.push(this.parseTernary())}while(this.match("COMMA")&&!this.check("RPAREN"));return e},parseArrayLiteral(){const e=[];if(!this.check("RBRACKET"))do{e.push(this.parseTernary())}while(this.match("COMMA")&&!this.check("RBRACKET"));return this.consume("RBRACKET","Expected closing bracket"),{type:"array",elements:e}},parseObjectLiteral(){const e=[];if(!this.check("RBRACE"))do{let t;if(this.check("STRING"))t=this.advance().value;else{if(!this.check("IDENTIFIER"))throw new Error("Expected property name");t=this.advance().value}this.consume("COLON",'Expected ":" after object key');const n=this.parseTernary();e.push({key:t,value:n})}while(this.match("COMMA")&&!this.check("RBRACE"));return this.consume("RBRACE","Expected closing brace"),{type:"object",pairs:e}},parsePropertyAccess(){let e=this.advance().value;for(;;)if(this.match("DOT")){if(!this.check("IDENTIFIER"))throw new Error('Expected property name after "."');e+="."+this.advance().value}else{if(!this.match("LBRACKET"))break;{const t=this.parseTernary();this.consume("RBRACKET","Expected closing bracket"),"literal"===t.type?e+="["+JSON.stringify(t.value)+"]":e+="["+this.reconstructExpression(t)+"]"}}return{type:"property",path:e}},reconstructExpression(e){if(!e)return"";switch(e.type){case"literal":return"string"==typeof e.value?'"'+e.value+'"':String(e.value);case"property":return e.path;case"arithmetic":return`${this.reconstructExpression(e.left)} ${e.operator} ${this.reconstructExpression(e.right)}`;default:return"unknown"}},match(...e){for(const t of e)if(this.check(t))return this.advance(),!0;return!1},matchOperator(...e){if(this.check("OPERATOR")){const t=this.peek();if(e.includes(t.value))return this.advance(),!0}return!1},check(e){return!this.isAtEnd()&&this.peek().type===e},advance(){return this.isAtEnd()||this.currentToken++,this.previous()},isAtEnd(){return this.currentToken>=this.tokens.length},peek(){return this.tokens[this.currentToken]||{type:"EOF",value:null}},previous(){return this.tokens[this.currentToken-1]},consume(e,t){if(this.check(e))return this.advance();throw new Error(t+` at token: ${JSON.stringify(this.peek())}`)},evaluate(e,t,n=null){if(e)switch(e.type){case"literal":return e.value;case"property":return this.getProperty(e.path,t,n);case"parentheses":return this.evaluate(e.inner,t,n);case"array":return this.evaluateArrayLiteral(e,t,n);case"object":return this.evaluateObjectLiteral(e,t,n);case"index":{const r=this.evaluate(e.object,t,n),i=this.evaluate(e.index,t,n);return r&&r[i]}case"ternary":return this.evaluate(e.condition,t,n)?this.evaluate(e.trueValue,t,n):this.evaluate(e.falseValue,t,n);case"logical":{const r=this.evaluate(e.left,t,n);return"&&"===e.operator?r?this.evaluate(e.right,t,n):r:"||"===e.operator?r||this.evaluate(e.right,t,n):r}case"comparison":case"arithmetic":{const r=this.evaluate(e.left,t,n),i=this.evaluate(e.right,t,n);return this.performOperation(r,e.operator,i)}case"unary":{const r=this.evaluate(e.operand,t,n);switch(e.operator){case"!":return!r;case"-":return-r;case"+":return+r;default:return r}}case"member":{const r=this.evaluate(e.object,t,n);return r&&r[e.property]}case"methodCall":{const r=this.evaluate(e.object,t,n);return Array.isArray(r)?this.evaluateArrayMethod(r,e.method,e.arguments.map(e=>this.evaluate(e,t,n))):void 0}default:return}},evaluateArrayMethod(e,t,n){switch(t){case"includes":return e.includes(n[0]);case"indexOf":return e.indexOf(n[0]);case"length":return e.length;case"join":return e.join(n[0]||",");default:return}},getProperty(e,t,n=null){if(!t||!e)return;let r=e;if(n&&n.resolveScopedPath&&(r=n.resolveScopedPath(e)),"number"==typeof r)return r;if(r=String(r),-1===r.indexOf(".")&&-1===r.indexOf("["))return r in t?t[r]:void 0;const i=r.split(o).filter(Boolean);let a=t;for(let e=0;e<i.length;e++){if(null==a)return;a=a[i[e]]}return a},evaluateArrayLiteral(e,t,n=null){return e.elements?e.elements.map(e=>this.evaluate(e,t,n)):[]},evaluateObjectLiteral(e,t,n=null){const r={};return e.pairs&&e.pairs.forEach(({key:e,value:i})=>{r[e]=this.evaluate(i,t,n)}),r},performOperation(e,t,n){switch(t){case"+":return e+n;case"-":return Number(e)-Number(n);case"*":return Number(e)*Number(n);case"/":return Number(e)/Number(n);case"%":return Number(e)%Number(n);case"===":return e===n;case"!==":return e!==n;case"==":return e==n;case"!=":return e!=n;case">=":return e>=n;case"<=":return e<=n;case">":return e>n;case"<":return e<n;default:return!1}},parseBindingString(e){const t=[];let n="",r=!1,i="",o=0,a=0,s=0;for(let c=0;c<e.length;c++){const l=e[c],h=c>0&&"\\"===e[c-1];'"'!==l&&"'"!==l||h||(r?l===i&&(r=!1,i=""):(r=!0,i=l)),r||("("===l?o++:")"===l?o--:"{"===l?a++:"}"===l?a--:"["===l?s++:"]"===l&&s--),","!==l||r||0!==o||0!==a||0!==s?n+=l:(this.addBindingPairIfValid(n,t),n="")}return this.addBindingPairIfValid(n,t),t},addBindingPairIfValid(e,t){const n=e.trim();if(!n)return;const r=n.indexOf(":");if(-1===r)return;const i=n.slice(0,r).trim().replace(/^['"]|['"]$/g,"");if(!i)return;const o=n.slice(r+1).trim();t.push({type:i,target:o})}},O={cache:new Map,bindingCache:new Map,maxSize:1e3,_cachedParse(e,t,n){const r=String(t).trim();if(e.has(r))return e.get(r);const i=n(t);return e.size>=this.maxSize&&e.delete(e.keys().next().value),e.set(r,i),i},parseExpression(e){return this._cachedParse(this.cache,e,e=>R.parseExpression(e))},parseBindingString(e){return this._cachedParse(this.bindingCache,e,e=>R.parseBindingString(e))}},K={};function D(e){this.context=e}function V(e,t,n){const r=this;this.originalAbstraction=t,this.parent=null,this.children=new Set,this.container=e,this.config=n,this.abstraction=this.createReactiveAbstraction(),this.domUpdater=new D(this),this.dependencies=this.getDependencies(),this.interpolationMap=new Map,this.textInterpolationMap=new Map,this.commentBindingMap=new Map,this.arrayHashMaps=new Map,this._readyCalled=!1,this.setupContainerScrollTracking(),x.observeContainer(this.container),this.updateQueue=new Map,this._updateQueueTimer=null,this._updateQueueFireAt=0,this.boundHandlePacEvent=function(e){r.handleEvent(e)},this.container.addEventListener("pac:event",this.boundHandlePacEvent),this.container.addEventListener("pac:change",this.boundHandlePacEvent),this.container.addEventListener("pac:array-change",this.boundHandlePacEvent),this.container.addEventListener("pac:browser-state",this.boundHandlePacEvent),this.timers=new Map,this.nextTimerId=1}K.value=function(e,t,n){if("radio"!==t.type){if("value"in t){const e=String(n||"");t.value!==e&&(t.value=e)}}else t.checked=t.value===String(n)},K.checked=function(e,t,n){if("checkbox"===t.type||"radio"===t.type){const e=Boolean(n);t.checked!==e&&(t.checked=e)}},K.visible=function(e,t,n){if(n)t.hasAttribute("data-pac-hidden")&&(t.style.display=t.getAttribute("data-pac-orig-display")||"block",t.removeAttribute("data-pac-hidden"),t.removeAttribute("data-pac-orig-display"));else if(!t.hasAttribute("data-pac-hidden")){const e=getComputedStyle(t).display;"none"!==e&&t.setAttribute("data-pac-orig-display",e),t.style.display="none",t.setAttribute("data-pac-hidden","true")}},K.if=function(e,t,n){const r=!!n;void 0===t._pacIfChildren&&(t._pacIfChildren=Array.from(t.childNodes),t._pacIsVisible=!0),r!==t._pacIsVisible&&(t._pacIsVisible=r,e.domUpdater.toggleNodeVisibility(t._pacIfChildren,r),r&&e.scanAndRegisterNewElements(t))},K.class=function(e,t,n){if("object"!=typeof n||null===n||Array.isArray(n)){if("string"==typeof n){const e=n.split(/\s+/).filter(Boolean);if(t._pacDynamicClasses)for(let n=0;n<t._pacDynamicClasses.length;n++)-1===e.indexOf(t._pacDynamicClasses[n])&&t.classList.remove(t._pacDynamicClasses[n]);for(let n=0;n<e.length;n++)t.classList.add(e[n]);t._pacDynamicClasses=e}}else for(const e in n)n[e]?t.classList.add(e):t.classList.remove(e)},K.style=function(e,t,n){if("object"!=typeof n||null===n||Array.isArray(n))"string"==typeof n&&(t.style.cssText=n);else for(const e in n)null!=n[e]&&(e.startsWith("--")?t.style.setProperty(e,n[e]):t.style[e]=n[e])},D.prototype.updateTextNode=function(t,n){const r=this,i=n.replace(e,(e,n)=>{try{const e=O.parseExpression(n),i={resolveScopedPath:e=>r.context.normalizePath(e,t)},o=R.evaluate(e,r.context.abstraction,i);return null!=o?String(o):""}catch(t){return e}});t.textContent!==i&&(t.textContent=i)},D.prototype.resolveBindingValue=function(e,t){const n=O.parseExpression(t.target),r={resolveScopedPath:t=>this.context.normalizePath(t,e)};return R.evaluate(n,this.context.abstraction,r)},D.prototype.updateAttributeBinding=function(e,t,n,r){try{const i=arguments.length>=4?r:this.resolveBindingValue(e,n),o=K[t];if(o)return void o(this.context,e,i);if("click"===t||"foreach"===t)return;this.applyAttributeBinding(e,t,i)}catch(e){}},D.prototype.applyAttributeBinding=function(e,t,n){"enable"===t?e.toggleAttribute("disabled",!n):a.includes(t)?e.toggleAttribute(t,!!n):null!=n?e.setAttribute(t,n):e.removeAttribute(t)},D.prototype.toggleNodeVisibility=function(e,t){if(t)for(let t=0;t<e.length;t++){const n=e[t]._pacIfPlaceholder;n&&n.parentNode&&n.parentNode.replaceChild(e[t],n)}else for(let t=0;t<e.length;t++)e[t].parentNode&&(e[t]._pacIfPlaceholder||(e[t]._pacIfPlaceholder=document.createComment("pac-if: hidden")),e[t].parentNode.replaceChild(e[t]._pacIfPlaceholder,e[t]))},V.prototype.destroy=function(){if(x._captureActive&&x._capturedContainer&&this.container===x._capturedContainer&&x.releaseCapture(),x.unObserveContainer(this.container),this.container.removeEventListener("pac:browser-state",this.boundHandlePacEvent),this.container.removeEventListener("pac:array-change",this.boundHandlePacEvent),this.container.removeEventListener("pac:change",this.boundHandlePacEvent),this.container.removeEventListener("pac:event",this.boundHandlePacEvent),this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),null!==this._updateQueueTimer&&(clearTimeout(this._updateQueueTimer),this._updateQueueTimer=null),this.boundHandlePacEvent=null,this.containerScrollHandler&&(clearTimeout(this.scrollTimeout),this.container.removeEventListener("scroll",this.containerScrollHandler),this.containerScrollHandler=null),this.killAllTimers(),this.abstraction.destroy&&"function"==typeof this.abstraction.destroy)try{this.abstraction.destroy()}catch(e){}this.parent&&this.parent.children&&this.parent.children.delete(this),this.interpolationMap.clear(),this.textInterpolationMap.clear(),this.arrayHashMaps.clear(),this.commentBindingMap.clear(),this.updateQueue.clear(),this.abstraction.pacId&&window.PACRegistry.deregister(this.abstraction.pacId),this.abstraction=null,this.container=null,this.parent=null,this.children=null,this.config=null},V.prototype.setTimer=function(e){const t=this.nextTimerId++,n=setInterval(()=>{L.sendMessage(this.abstraction.pacId,275,t,0)},e);return this.timers.set(t,n),t},V.prototype.killTimer=function(e){const t=this.timers.get(e);return!!t&&(clearInterval(t),this.timers.delete(e),!0)},V.prototype.killAllTimers=function(){const e=this.timers.size;return this.timers.forEach(clearInterval),this.timers.clear(),e},V.prototype.setupContainerScrollTracking=function(){requestAnimationFrame(()=>this.updateContainerScrollState());const e=()=>{clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.updateContainerScrollState()},16)};this.container.addEventListener("scroll",e,{passive:!0}),this.containerScrollHandler=e},V.prototype.updateContainerScrollState=function(){const e=this.container.scrollLeft,t=this.container.scrollTop,n=this.container.clientWidth,r=this.container.clientHeight,i=this.container.scrollWidth,o=this.container.scrollHeight,a=i>this.abstraction.containerWidth||o>this.abstraction.containerHeight;this.abstraction.containerScrollX=e,this.abstraction.containerScrollY=t,this.abstraction.containerScrollContentWidth=i,this.abstraction.containerScrollContentHeight=o,this.abstraction.containerIsScrollable=a,Object.assign(this.abstraction.containerScrollWindow,{top:t,left:e,right:e+n,bottom:t+r,x:e,y:t})},V.prototype.scanAndRegisterNewElements=function(e){const t=this,n=this.scanBindings(e),r=this.scanTextBindings(e),i=this.scanCommentBindings(e);n.forEach((t,n)=>{n!==e&&this.interpolationMap.set(n,t)}),r.forEach((e,t)=>{this.textInterpolationMap.set(t,e)}),i.forEach((e,n)=>{this.commentBindingMap.set(n,e),t.updateCommentConditional(n,e)}),n.forEach((e,n)=>{Object.keys(e.bindings).forEach(r=>{const i=e.bindings[r];t.domUpdater.updateAttributeBinding(n,r,i)})}),r.forEach((e,n)=>{t.domUpdater.updateTextNode(n,e.template)}),Array.from(n.entries()).filter(([t,n])=>n.bindings.foreach&&t!==e).sort(([,e],[,t])=>{const n=e.depth;return t.depth-n}).forEach(([e])=>{this.renderForeach(e)})},V.prototype.getElementDepth=function(e){let t=0,n=e;for(;n&&n!==this.container;)t++,n=n.parentElement;return t},V.prototype.getDependencies=function(){const e=new Map,t=this.originalAbstraction.computed||{},n=new Set,r=new Proxy(this.originalAbstraction,{get:(e,t)=>("string"==typeof t&&n.add(t),e[t])});return Object.keys(t).forEach(i=>{n.clear(),t[i].call(r),n.forEach(t=>{e.has(t)||e.set(t,[]),e.get(t).push(i)})}),e},V.prototype.inferArrayRoot=function(e){for(const[t,n]of this.dependencies){const r=this.abstraction[t],i=Array.isArray(r);if(n.includes(e)&&i)return t}return e},V.prototype.updateQueueHandler=function(){if(this._updateQueueTimer=null,this._updateQueueFireAt=0,0===this.updateQueue.size)return;const e=Date.now();let t=1/0;const n=[];this.updateQueue.forEach((r,i)=>{if("delay"===r.trigger)if(e>=r.executeAt){n.push(i);try{N.setNestedProperty(i,r.value,this.abstraction)}catch(e){}}else r.executeAt<t&&(t=r.executeAt)});for(let e=0;e<n.length;e++)this.updateQueue.delete(n[e]);t<1/0&&this.scheduleQueueProcessing(t-e)},V.prototype.scheduleQueueProcessing=function(e){const t=this,n=Math.max(e,1),r=Date.now()+n;null!==this._updateQueueTimer&&this._updateQueueFireAt<=r||(null!==this._updateQueueTimer&&clearTimeout(this._updateQueueTimer),this._updateQueueFireAt=r,this._updateQueueTimer=setTimeout(function(){t.updateQueueHandler()},n))},V.prototype.getUpdateConfiguration=function(e){const t=e.getAttribute("data-pac-update-mode")||this.config.updateMode||"immediate",n=parseInt(e.getAttribute("data-pac-update-delay"))||this.config.delay||300;return{updateMode:t,delay:Math.min(n,3e3)}},V.prototype.handleEvent=function(e){switch(e.type){case"pac:event":this.handlePacEvent(e);break;case"pac:array-change":this.handleArrayChange(e);break;case"pac:change":this.handleReactiveChange(e);break;case"pac:browser-state":this.handleBrowserStateEvent(e)}},V.prototype.handlePacEvent=function(e){let t=!1;if(this.originalAbstraction.msgProc&&"function"==typeof this.originalAbstraction.msgProc){const n=this.originalAbstraction.msgProc.call(this.abstraction,e);[p,m,g,y,E,b,C,v,592,w,T].includes(e.message)&&!1===n&&(t=!0)}if(t)e.preventDefault();else switch(7!==e.message&&8!==e.message||this.updateFocusProperties(),e.message){case y:this.handleDomClicks(e);break;case C:this.handleDomSubmit(e);break;case v:this.handleDomChange(e);break;case _:this.handleDomInputComplete(e);break;case 8:this.handleDomBlur(e)}},V.prototype.updateFocusProperties=function(){this.abstraction.containerFocus=N.isElementDirectlyFocused(this.container),this.abstraction.containerFocusWithin=N.isElementFocusWithin(this.container)},V.prototype.handleDomClicks=function(e){const t=this.interpolationMap.get(e.target);if(!t?.bindings?.click)return;const n=this.abstraction[t.bindings.click.target];if("function"==typeof n)try{const t=this.extractClosestForeachContext(e.target);if(!t)return void n.call(this.abstraction,e);const r=Array.from(this.interpolationMap.entries()).find(([,e])=>e.foreachId===t.foreachId)?.[0];if(!r)return void n.call(this.abstraction,e);const i=this.interpolationMap.get(r),o={resolveScopedPath:t=>this.normalizePath(t,e.target)},a=R.evaluate(O.parseExpression(i.foreachExpr),this.abstraction,o);n.call(this.abstraction,a[t.index],t.index,e)}catch(e){}},V.prototype.handleDomSubmit=function(e){const t=this.interpolationMap.get(e.target);if(!t?.bindings?.submit)return;const n=this.abstraction[t.bindings.submit.target];if("function"==typeof n)try{n.call(this.abstraction,e)}catch(e){}},V.prototype.handleDomChange=function(e){const t=this,n=e.target,r=this.interpolationMap.get(n);if(r){if(r.bindings.value){const e=r.bindings.value,i=t.normalizePath(e.target,n);N.setNestedProperty(i,n.value,this.abstraction)}if(r.bindings.checked){const e=r.bindings.checked,i=t.normalizePath(e.target,n);"checkbox"===n.type?N.setNestedProperty(i,n.checked,this.abstraction):"radio"===n.type&&n.checked&&N.setNestedProperty(i,n.value,this.abstraction)}if(r.bindings.change){const t=this.abstraction[r.bindings.change.target];if("function"==typeof t)try{t.call(this.abstraction,e)}catch(e){}}}},V.prototype.handleDomInputComplete=function(e){const t=this,n=e.target,r=this.interpolationMap.get(n);if(r&&r.bindings.value){const e=r.bindings.value,i=t.normalizePath(e.target,n),o=this.getUpdateConfiguration(n);switch(o.updateMode){case"immediate":N.setNestedProperty(i,n.value,this.abstraction);break;case"delayed":this.updateQueue.set(i,{trigger:"delay",value:n.value,executeAt:Date.now()+o.delay}),this.scheduleQueueProcessing(o.delay);break;case"change":this.updateQueue.set(i,{trigger:"blur",value:n.value,elementId:N.getElementIdentifier(n)})}}},V.prototype.handleDomBlur=function(e){const t=e.target;if(!this.interpolationMap.get(t))return;const n=N.getElementIdentifier(t),r=[];this.updateQueue.forEach((e,t)=>{"blur"===e.trigger&&e.elementId===n&&r.push({path:t,value:e.value})}),r.forEach(e=>{try{N.setNestedProperty(e.path,e.value,this.abstraction),this.updateQueue.delete(e.path)}catch(t){this.updateQueue.delete(e.path)}})},V.prototype.handleReactiveChange=function(e){this.updateElementBindings(),this.updateTextInterpolations(),this.updateCommentConditionals(),this.handleWatchersForChange(e),this.handleForeachRebuildForChange(e)},V.prototype.updateElementBindings=function(){const e=this.abstraction,t=this.domUpdater,n=this;this.interpolationMap.forEach(function(r,i){const o=r.bindings,a=Object.keys(o);if(0===a.length)return;const s={resolveScopedPath:function(e){return n.normalizePath(e,i)}};i._pacPreviousValues||(i._pacPreviousValues={});const c=i._pacPreviousValues;for(let n=0,r=a.length;n<r;n++){const r=a[n];if("foreach"!==r&&"click"!==r)try{const n=o[r],a=O.parseExpression(n.target),l=R.evaluate(a,e,s);N.isEqual(c[r],l)||(c[r]=l,t.updateAttributeBinding(i,r,n,l))}catch(e){}}})},V.prototype.updateTextInterpolations=function(){const t=this.abstraction,n=this;this.textInterpolationMap.forEach((r,i)=>{try{i._pacPreviousText||(i._pacPreviousText=i.textContent);const o={resolveScopedPath:function(e){return n.normalizePath(e,i)}},a=r.template.replace(e,function(e,n){try{const e=O.parseExpression(n),r=R.evaluate(e,t,o);return null!=r?String(r):""}catch(t){return e}});i._pacPreviousText!==a&&(i.textContent=a,i._pacPreviousText=a)}catch(e){}})},V.prototype.updateCommentConditionals=function(){this.commentBindingMap.forEach((e,t)=>{this.updateCommentConditional(t,e)})},V.prototype.handleWatchersForChange=function(e){const t=e.detail.path,n=t[0];if(1===t.length)return void this.triggerWatcher(n,e.detail.newValue,e.detail.oldValue);const r=this.abstraction[n];if(Array.isArray(r))return;const i={...r};let o=i;for(let e=1;e<t.length-1;e++)o=o[t[e]];o[t[t.length-1]]=e.detail.oldValue,this.triggerWatcher(n,r,i)},V.prototype.handleForeachRebuildForChange=function(e){const t=e.detail.path;if(1!==t.length)return;const n=t[0],r=this.dependencies.get(n),i=Array.isArray(this.abstraction[n]);if(i||r)for(const[e,t]of this.interpolationMap){if(!t.bindings||!t.bindings.foreach)continue;const o=t.foreachExpr,a=t.sourceArray;(!i||o!==n&&a!==n)&&(!r||-1===r.indexOf(o)&&-1===r.indexOf(a))||this.shouldRebuildForeach(e)&&this.renderForeach(e)}},V.prototype.triggerWatcher=function(e,t,n){if(this.originalAbstraction.watch&&this.originalAbstraction.watch[e]&&"function"==typeof this.originalAbstraction.watch[e])try{this.originalAbstraction.watch[e].call(this.abstraction,t,n)}catch(e){}},V.prototype.handleBrowserStateEvent=function(e){const{stateType:t,stateData:n}=e.detail;switch(t){case"visibility":this.abstraction.browserVisible=n.visible;break;case"online":this.abstraction.browserOnline=n.online,this.abstraction.browserNetworkEffectiveType=n.networkType,this.abstraction.browserNetworkQuality=n.networkQuality;break;case"scroll":this.abstraction.browserScrollX=n.scrollX,this.abstraction.browserScrollY=n.scrollY;break;case"resize":{this.abstraction.browserViewportWidth=n.viewportWidth,this.abstraction.browserViewportHeight=n.viewportHeight,this.abstraction.browserDocumentWidth=n.documentWidth,this.abstraction.browserDocumentHeight=n.documentHeight,this.abstraction.browserScrollX=n.scrollX,this.abstraction.browserScrollY=n.scrollY;const e=this.container.getBoundingClientRect();this.abstraction.containerClientRect=N.domRectToSimpleObject(e),this.abstraction.containerWidth=e.width,this.abstraction.containerHeight=e.height,this.abstraction.containerVisible=N.isElementVisible(this.container),this.abstraction.containerFullyVisible=N.isElementFullyVisible(this.container);break}}},V.prototype.handleArrayChange=function(e){const t=e.detail,n=N.pathArrayToString(t.path),r=this.findForeachElementsByArrayPath(n);if(0===r.length)return;const i=this.arrayHashMaps.get(n)||new Map,o=this.classifyArrayChanges(i,t.newValue),a=this.canHandleSimply(o);for(let e=0,i=r.length;e<i;e++)a?this.handleSimpleArrayChange(r[e],o,t.newValue,n):this.renderForeach(r[e])},V.prototype.scanBindings=function(e){const t=new Map,n=e.querySelectorAll("[data-pac-bind]");for(let e=0,r=n.length;e<r;e++){const r=n[e];if(!N.belongsToPacContainer(this.container,r))continue;const i=r.getAttribute("data-pac-bind"),o=O.parseBindingString(i),a=Object.create(null);for(let e=0,t=o.length;e<t;e++)a[o[e].type]={target:o[e].target};t.set(r,{bindingString:i,bindings:a})}return this.extendBindingsWithForEachData(t),t},V.prototype.findElementByForEachId=function(e){for(const[t,n]of this.interpolationMap)if(n.foreachId===e)return t;return null},V.prototype.extendBindingsWithForEachData=function(e){const t=this;e.forEach((n,r)=>{if(!n.bindings.foreach)return;if(n.foreachId)return;if(r.hasAttribute("data-pac-foreach-id")){const n=r.getAttribute("data-pac-foreach-id"),i=t.findElementByForEachId(n),o=t.interpolationMap.get(i);return e.set(r,o),void t.interpolationMap.delete(i)}const i=N.uniqid("foreach");r.setAttribute("data-pac-foreach-id",i);const o=n.bindings.foreach.target,a=r.getAttribute("data-pac-item")||"item",s=r.getAttribute("data-pac-index")||"$index",c=t.getElementDepth(r);Object.assign(n,{foreachId:i,foreachExpr:o,sourceArray:this.inferArrayRoot(o),template:r.innerHTML,itemVar:a,indexVar:s,depth:c}),e.set(r,n)})},V.prototype.scanTextBindings=function(e){const n=new Map,r=this.container,i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:e=>t.test(e.textContent)&&N.belongsToPacContainer(r,e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});let o;for(;o=i.nextNode();)n.set(o,{template:o.textContent});return n},V.prototype.scanCommentBindings=function(e){const t=new Map,n=[],o=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,{acceptNode:e=>N.belongsToPacContainer(this.container,e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});let a;for(;a=o.nextNode();){const e=a.nodeValue,o=e.match(r);if(o){n.push({comment:a,expression:o[1].trim()});continue}if(!e.match(i)||0===n.length)continue;const{comment:s,expression:c}=n.pop(),l=[];for(let e=s.nextSibling;e&&e!==a;e=e.nextSibling)l.push(e);t.set(s,{expression:c,closingComment:a,content:l,isVisible:!0})}return n.length,t},V.prototype.updateCommentConditional=function(e,t){const n=this,r={resolveScopedPath:t=>{let r=e.parentNode;for(;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.parentNode;return r?n.normalizePath(t,r):t}};try{const e=O.parseExpression(t.expression),i=!!R.evaluate(e,this.abstraction,r);if(i===t.isVisible)return;t.isVisible=i,this.domUpdater.toggleNodeVisibility(t.content,i),i&&t.content.forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&n.scanAndRegisterNewElements(e)})}catch(e){}},V.prototype.createReactiveAbstraction=function(){const e=this;this.injectHierarchyProperties(this.originalAbstraction),this.injectSystemProperties(this.originalAbstraction);const t=function(e,t){const n=["push","pop","shift","unshift","splice","sort","reverse"];function r(e){return"string"==typeof e&&!e.startsWith("_")&&!e.startsWith("$")}function i(e,n,r,i){t.dispatchEvent(new CustomEvent("pac:array-change",{detail:{path:e,oldValue:n,newValue:r,method:i}})),t.dispatchEvent(new CustomEvent("pac:change",{detail:{path:e,oldValue:n,newValue:r}}))}return e&&"object"==typeof e?function e(o,a){return a=a||[],new Proxy(o,{get:function(t,o){return function(t,o,a){const s=t[o];if(Array.isArray(t)&&"function"==typeof s&&n.includes(o))return function(t,n,r){return function(){const o=Array.prototype.slice.call(t),a=Array.prototype[n].apply(t,arguments),s=Array.prototype.slice.call(t);s.forEach((t,n)=>{if(t&&"object"==typeof t&&!t._isReactive){const i=r.concat([n]);s[n]=e(t,i),s[n]._isReactive=!0}});for(let e=0;e<s.length;e++)t[e]=s[e];return i(r,o,t,n),a}}(t,o,a);const c=Object.getOwnPropertyDescriptor(t,o);if(c&&c.get&&!c.set)return s;if("function"==typeof s)return s;if(s&&"object"==typeof s&&!s._isReactive&&r(o)){const n=e(s,a.concat([o]));return n._isReactive=!0,t[o]=n,n}return s}(t,o,a)},set:function(n,o,s){return function(n,o,a,s){if(Array.isArray(n)&&"length"===o)return function(e,t,n){if(e.length===t)return!0;const r=Array.prototype.slice.call(e);return e.length=t,i(n,r,Array.prototype.slice.call(e),"length"),!0}(n,a,s);const c=n[o],l=s.concat([o]);return c===a||(function(e,n,r){1===r.length&&("containerScrollX"===e&&t?t.scrollLeft=n:"containerScrollY"===e&&t?t.scrollTop=n:"browserScrollX"===e?window.scrollTo(n,window.scrollY):"browserScrollY"===e&&window.scrollTo(window.scrollX,n))}(o,a,l),r(o)?(a&&"object"==typeof a?(n[o]=e(a,l),n[o]._isReactive=!0):n[o]=a,Array.isArray(a)&&t.dispatchEvent(new CustomEvent("pac:array-change",{detail:{path:l,oldValue:c,newValue:n[o],method:"assignment"}})),t.dispatchEvent(new CustomEvent("pac:change",{detail:{path:l,oldValue:c,newValue:n[o]}})),!0):(n[o]=a,!0))}(n,o,s,a)},deleteProperty:function(e,n){return function(e,n,i){if(!(n in e))return!0;if(!r(n))return delete e[n],!0;const o=e[n],a=i.concat([n]);return delete e[n],t.dispatchEvent(new CustomEvent("pac:change",{detail:{path:a,oldValue:o,newValue:void 0}})),!0}(e,n,a)}})}(e,[]):e}(this.originalAbstraction,this.container);Object.keys(this.originalAbstraction).forEach(function(n){"function"==typeof e.originalAbstraction[n]&&"computed"!==n&&(t[n]=e.originalAbstraction[n].bind(t))});const n=this.originalAbstraction.computed||{};return Object.keys(n).forEach(function(e){Object.defineProperty(t,e,{get:function(){return n[e].call(t)},enumerable:!0,configurable:!0})}),Object.assign(t,{notifyParent:(t,n)=>e.notifyParent(t,n),notifyChildren:(t,n)=>e.notifyChildren(t,n),notifyChild:(t,n,r)=>e.notifyChild(t,n,r),toJSON:function(){const t={},n=e.originalAbstraction.computed?Object.keys(e.originalAbstraction.computed):[];return Object.keys(this).forEach(e=>{const r=this[e];void 0===r||"function"==typeof r||n.includes(e)||(t[e]=r)}),t}}),Object.defineProperties(t,{formatValue:{value:e=>N.formatValue(e),writable:!1,enumerable:!1},escapeHTML:{value:e=>N.escapeHTML(e),writable:!1,enumerable:!1},sanitizeUserInput:{value:e=>N.sanitizeUserInput(e),writable:!1,enumerable:!1},containerToViewport:{value:(t,n)=>{const r=e.container.getBoundingClientRect();return{x:t+r.left,y:n+r.top}},writable:!1,enumerable:!1},viewportToContainer:{value:(t,n)=>{const r=e.container.getBoundingClientRect();return{x:t-r.left,y:n-r.top}},writable:!1,enumerable:!1}}),t},V.prototype.injectHierarchyProperties=function(e){e.childrenCount=0,e.hasParent=!1},V.prototype.injectSystemProperties=function(e){e.container=this.container,e.pacId=this.container.getAttribute("data-pac-id")||this.container.id,e.browserOnline=navigator.onLine,e.browserNetworkEffectiveType=N.getNetworkEffectiveType(),e.browserNetworkQuality=N.detectNetworkQuality(),e.browserVisible=!document.hidden,e.browserScrollX=window.scrollX,e.browserScrollY=window.scrollY,e.browserViewportHeight=window.innerHeight,e.browserViewportWidth=window.innerWidth,e.browserDocumentWidth=document.documentElement.scrollWidth,e.browserDocumentHeight=document.documentElement.scrollHeight,e.containerIsScrollable=!1,e.containerScrollX=this.container.scrollLeft,e.containerScrollY=this.container.scrollTop,e.containerScrollContentWidth=this.container.scrollWidth,e.containerScrollContentHeight=this.container.scrollHeight,e.containerScrollWindow={top:0,left:0,right:0,bottom:0,x:0,y:0},e.containerFocus=N.isElementDirectlyFocused(this.container),e.containerFocusWithin=N.isElementFocusWithin(this.container),e.containerVisible=N.isElementVisible(this.container),e.containerFullyVisible=N.isElementFullyVisible(this.container),e.containerClientRect={top:0,left:0,right:0,bottom:0,width:0,height:0,x:0,y:0},e.containerWidth=this.container.clientWidth,e.containerHeight=this.container.clientHeight},V.prototype.findParentForeachElement=function(e){let t=e.parentElement;for(;t&&t!==this.container;){if(t.hasAttribute("data-pac-bind")&&t.getAttribute("data-pac-bind").includes("foreach:"))return t;t=t.parentElement}return null},V.prototype.renderForeach=function(e){const t=this,n=this.interpolationMap.get(e);if(!n||!n.foreachId)return;const r=n.sourceArray;this.cleanupForeachMaps(e);const i={resolveScopedPath:t=>this.normalizePath(t,e)};try{const o=R.evaluate(O.parseExpression(n.foreachExpr),this.abstraction,i);if(!o)return;if(!Array.isArray(o))return void(e.innerHTML="");const a=this.getSourceArrayForFiltered(n.foreachExpr,o,n),s=t.arrayHashMaps.get(r)||new Map;s.clear(),e._pacPreviousArray=o;let c="";o.forEach((e,r)=>{const i=t.findOriginalIndex(e,a,r),o=t.createForeachEntryHash(e,i);s.set(o,i),c+=`\x3c!-- pac-foreach-item: ${n.foreachId}, index=${i}, renderIndex=${r} --\x3e`+n.template+"\x3c!-- /pac-foreach-item --\x3e"}),e.innerHTML=c,this.arrayHashMaps.set(r,s),this.cacheContextOnItemElements(e),this.scanAndRegisterNewElements(e)}catch(e){}},V.prototype.getSourceArrayForFiltered=function(e,t,n){const r=n&&n.sourceArray||this.inferArrayRoot(e);if(!r)return t;const i=this.abstraction[r];return Array.isArray(i)?i:t},V.prototype.findOriginalIndex=function(e,t,n){if("number"==typeof e||"string"==typeof e||"boolean"==typeof e)return n;const r=e&&"object"==typeof e&&void 0!==e.id,i=r?e.id:void 0,o=t.length;let a=-1;for(let n=0;n<o;n++){const o=t[n];if(o===e)return n;r&&-1===a&&o&&"object"==typeof o&&o.id===i&&(a=n)}if(-1!==a)return a;for(let n=0;n<o;n++)if(N.isEqual(t[n],e))return n;return n},V.prototype.getForeachChain=function(e){if(e._pacForeachChain)return e._pacForeachChain;const t=[],n=this.container,r=this.interpolationMap;let i=e;for(;i;){const e=this.extractClosestForeachContext(i);if(e){const i=n.querySelector(`[data-pac-foreach-id="${e.foreachId}"]`),o=i&&r.get(i);o&&t.push({foreachId:e.foreachId,depth:o.depth,index:e.index,renderIndex:e.renderIndex,container:i,itemVar:o.itemVar,indexVar:o.indexVar,sourceArray:o.sourceArray})}i=this.findParentForeachElement(i)}return e._pacForeachChain=t,t},V.prototype.resolveScopedTokens=function(e,t){const n=[];for(let r=0;r<e.length;r++){const i=e[r];if(!t.has(i)){n.push(i);continue}const o=t.get(i);if("number"==typeof o){n.push(o);continue}const a=N.pathStringToArray(o);for(let e=0;e<a.length;e++)n.push(a[e])}return n},V.prototype.extractParentClimbs=function(e){let t=0;for(;t<e.length&&"parent"===e[t];)t++;return t},V.prototype.buildForeachScope=function(e){const t=new Map;for(const n of e){if(!t.has(n.itemVar)){const e=N.pathStringToArray(n.sourceArray),r=this.resolveScopedTokens(e,t),i=N.pathArrayToString(r);t.set(n.itemVar,`${i}[${n.index}]`)}n.indexVar&&!t.has(n.indexVar)&&t.set(n.indexVar,n.index)}return t},V.prototype.getEffectiveFrames=function(e,t){const n=this.getForeachChain(e);return t>n.length&&(t=n.length),n.slice(t).reverse()},V.prototype.normalizePath=function(e,t){const n=N.pathStringToArray(e);if(0===n.length)return"";const r=this.extractParentClimbs(n),i=this.getEffectiveFrames(t,r);if(0===i.length){const e=n.slice(r);return 0===e.length?"":1===e.length&&"number"==typeof e[0]?e[0]:N.pathArrayToString(e)}const o=this.buildForeachScope(i),a=n.slice(r);if(0===a.length)return"";const s=this.resolveScopedTokens(a,o);return 1===s.length&&"number"==typeof s[0]?s[0]:N.pathArrayToString(s)},V.prototype.shouldRebuildForeach=function(e){const t=this.interpolationMap.get(e);if(!t)return!1;const n={resolveScopedPath:t=>this.normalizePath(t,e)},r=R.evaluate(O.parseExpression(t.foreachExpr),this.abstraction,n);if(!Array.isArray(r))return!1;const i=e._pacPreviousArray;if(!i)return!0;if(r.length!==i.length)return!0;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!0;return!1},V.prototype.findForeachElementsByArrayPath=function(e){const t=[];for(const[n,r]of this.interpolationMap)r.bindings&&r.bindings.foreach&&(r.foreachExpr!==e&&r.sourceArray!==e||t.push(n));return t},V.prototype.extractClosestForeachContext=function(e){const t=this.container,r=Node.COMMENT_NODE;let i=e;for(;i&&i!==t;){if(i._pacForeachContext)return i._pacForeachContext;let t=i.previousSibling;for(;t;){if(t.nodeType===r){const r=t.textContent.trim().match(n);if(r){const t={foreachId:r[1].trim(),index:parseInt(r[2],10),renderIndex:parseInt(r[3],10)};return e._pacForeachContext=t,t}}t=t.previousSibling}i=i.parentElement}return null},V.prototype.cacheContextOnItemElements=function(e){const t=document.createTreeWalker(e,NodeFilter.SHOW_ALL);let r,i=null;for(;r=t.nextNode();)if(r.nodeType===Node.COMMENT_NODE){const e=r.textContent.match(n);e?i={foreachId:e[1].trim(),index:parseInt(e[2],10),renderIndex:parseInt(e[3],10)}:"/pac-foreach-item"===r.textContent.trim()&&(i=null)}else r.nodeType===Node.ELEMENT_NODE&&i&&(r._pacForeachContext=i)},V.prototype.cleanupForeachMaps=function(e){const t=[],n=[];this.interpolationMap.forEach((n,r)=>{e.contains(r)&&r!==e&&t.push(r)}),this.textInterpolationMap.forEach((t,r)=>{e.contains(r)&&n.push(r)}),t.forEach(e=>{this.interpolationMap.delete(e),delete e._pacPreviousValues,delete e._pacPreviousArray,delete e._pacDynamicClass,delete e._pacForeachChain}),n.forEach(e=>{this.textInterpolationMap.delete(e),delete e._pacPreviousText,delete e._pacForeachChain})},V.prototype.establishHierarchy=function(e,t){if(this.updateParentRelationship(e),this.updateChildrenRelationships(t),this.abstraction.childrenCount=this.children.size,this.abstraction.hasParent=!!this.parent,this.scanAndRegisterNewElements(this.container),!this._readyCalled&&this.abstraction.ready&&"function"==typeof this.abstraction.ready){this._readyCalled=!0;try{this.abstraction.ready.call(this.abstraction)}catch(e){}}},V.prototype.updateParentRelationship=function(e){this.parent!==e&&(this.parent&&this.parent.children.delete(this),this.parent=e,e&&e.children.add(this))},V.prototype.updateChildrenRelationships=function(e){this.children.clear(),e.forEach(e=>{e.parent&&e.parent!==this&&e.parent.children.delete(e),e.parent=this,this.children.add(e)})},V.prototype.notifyParent=function(e,t,n=!1){if(this.parent){if("function"==typeof this.parent.receiveUpdate){const r=this.parent.receiveUpdate(e,t,this);if(n&&!1===r)return}n&&this.parent.notifyParent(e,t,n)}},V.prototype.receiveUpdate=function(e,t,n){return!this.abstraction.receiveFromChild||"function"!=typeof this.abstraction.receiveFromChild||this.abstraction.receiveFromChild(e,t,n)},V.prototype.receiveFromParent=function(e,t){this.abstraction.receiveFromParent&&"function"==typeof this.abstraction.receiveFromParent&&this.abstraction.receiveFromParent(e,t)},V.prototype.notifyChildren=function(e,t){this.children.forEach(n=>{n&&"function"==typeof n.receiveFromParent&&n.receiveFromParent(e,t)})},V.prototype.notifyChild=function(e,t,n){const r=Array.from(this.children).find(t=>t.container.getAttribute("data-pac-id")===e);r&&"function"==typeof r.receiveFromParent&&r.receiveFromParent(t,n)},V.prototype.createContentHash=function(e){return function e(t){return null==t||"object"!=typeof t?String(t):Array.isArray(t)?"["+t.map(function(t){return e(t)}).join(",")+"]":"{"+Object.keys(t).sort().map(function(n){return n+":"+e(t[n])}).join(",")+"}"}(e)},V.prototype.createForeachEntryHash=function(e,t){if("number"!=typeof t||t<0||!Number.isInteger(t))throw new Error("index must be a non-negative integer");const n=`${t}|${this.createContentHash(e)}`;return N.djb2Hash(n)},V.prototype.classifyArrayChanges=function(e,t){const n=this,r=new Map;t.forEach((e,t)=>{const i=n.createForeachEntryHash(e,t);r.set(i,t)});const i={removed:[],moved:[],added:[],unchanged:[]};return e.forEach((e,t)=>{r.has(t)||i.removed.push(e)}),r.forEach((t,n)=>{if(e.has(n)){const r=e.get(n);r===t?i.unchanged.push(t):i.moved.push({from:r,to:t,hash:n})}else i.added.push(t)}),i.removed.sort((e,t)=>t-e),i.moved.sort((e,t)=>e.to-t.to),i.added.sort((e,t)=>e-t),i},V.prototype.canHandleSimply=function(e){const t=e.added.length+e.removed.length+e.moved.length;return!(t>10)&&(e.added.length>0&&0===e.removed.length&&0===e.moved.length||e.removed.length>0&&0===e.added.length&&0===e.moved.length||e.moved.length>0&&0===e.added.length&&0===e.removed.length||e.added.length===e.removed.length&&0===e.moved.length||t<=3)},V.prototype.handleSimpleArrayChange=function(e,t,n,r){const i=this.interpolationMap.get(e);t.removed.length>0&&this.removeItems(e,t.removed),t.moved.length>0&&this.moveItems(e,t.moved),t.added.length>0&&this.addItems(e,t.added,n,i),this.scanAndRegisterNewElements(e),this.rebuildHashMap(e,n,r),e._pacPreviousArray=n},V.prototype.rebuildHashMap=function(e,t,r){const i=new Map,o=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT);let a;for(;a=o.nextNode();){const e=a.textContent.match(n);if(e){const n=parseInt(e[2],10),r=parseInt(e[3],10);if(r<t.length){const e=t[r],o=this.createForeachEntryHash(e,n);i.set(o,n)}}}this.arrayHashMaps.set(r,i)},V.prototype.removeItems=function(e,t){if(!(e instanceof Element))throw new TypeError("element must be a DOM Element");if(!Array.isArray(t))throw new TypeError("removedIndices must be an array");const n=this;t.forEach(t=>{this.findItemNodes(e,t).forEach(t=>{const r=document.createTreeWalker(t.nodeType===Node.ELEMENT_NODE?t:t.parentElement,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT,{acceptNode:t=>N.belongsToPacContainer(e,t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});let i;for(;i=r.nextNode();)i instanceof Element?n.interpolationMap.delete(i):i.nodeType===Node.TEXT_NODE?n.textInterpolationMap.delete(i):i.nodeType===Node.COMMENT_NODE&&n.commentBindingMap.delete(i);t.remove()})})},V.prototype.moveItems=function(e,t){if(!(e instanceof Element))throw new TypeError("element must be a DOM Element");if(!Array.isArray(t))throw new TypeError("moves must be an array");t.forEach(t=>{if("object"!=typeof t||null===t)throw new TypeError("each move must be an object");if("number"!=typeof t.from||"number"!=typeof t.to)throw new TypeError('move objects must have numeric "from" and "to" properties');if(t.from<0||t.to<0)throw new RangeError("move indices cannot be negative");const n=this.findItemNodes(e,t.from),r=this.findInsertionPoint(e,t.to);n.forEach(t=>{r?e.insertBefore(t,r):e.appendChild(t)})})},V.prototype.addItems=function(e,t,n,r){const i=this.getSourceArrayForFiltered(r.foreachExpr,n,r);t.forEach(t=>{const o=n[t],a=this.findOriginalIndex(o,i,t),s=`\x3c!-- pac-foreach-item: ${r.foreachId}, index=${a}, renderIndex=${t} --\x3e`+r.template+"\x3c!-- /pac-foreach-item --\x3e",c=this.createTemporaryContainer(e);c.innerHTML=s,this.cacheContextOnItemElements(c);const l=this.findInsertionPoint(e,t);for(;c.firstChild;)l?e.insertBefore(c.firstChild,l):e.appendChild(c.firstChild)})},V.prototype.createTemporaryContainer=function(e){switch(e.tagName.toLowerCase()){case"table":case"tbody":case"thead":case"tfoot":return document.createElement("tbody");case"tr":return document.createElement("tr");case"ul":case"ol":return document.createElement("ul");case"select":return document.createElement("select");default:return document.createElement("div")}},V.prototype.findItemNodes=function(e,t){const r=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ALL);let o,a=!1,s=0;for(;o=i.nextNode();)if(o.nodeType===Node.COMMENT_NODE){const e=o.textContent.trim(),i=e.match(n);if(i&&parseInt(i[2],10)===t&&!a)a=!0,s=0,r.push(o);else if(a)if(r.push(o),i)s++;else if("/pac-foreach-item"===e){if(0===s)break;s--}}else a&&r.push(o);return r},V.prototype.findInsertionPoint=function(e,t){const r=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT);let i;for(;i=r.nextNode();){const e=i.textContent.match(n);if(e&&parseInt(e[3],10)>=t)return i}return null};const I={observer:null,initialize(){this.observer||(this.observer=new MutationObserver(e=>{const t=new Set;e.forEach(e=>{e.removedNodes.forEach(e=>{if(e.nodeType!==Node.ELEMENT_NODE)return;const n=[...e.matches("[data-pac-id]")?[e]:[],...e.querySelectorAll("[data-pac-id]")];for(let e=n.length-1;e>=0;e--){const r=n[e].getAttribute("data-pac-id");r&&!t.has(r)&&(t.add(r),window.PACRegistry.components.get(r)?.destroy())}})})}),this.observer.observe(document.body,{childList:!0,subtree:!0}))}},k={_initialized:!1,isRecording:!1,gesturePoints:[],startTime:0,gestureContainer:null,gestureJustDispatched:!1,lastGesturePrevented:!1,MIN_DISTANCE:10,MIN_SEGMENT_LENGTH:30,DIRECTION_THRESHOLD:.7,MAX_GESTURE_TIME:2e3,patterns:{right:["R"],left:["L"],up:["U"],down:["D"],L:["D","R"],"inverted-L":["D","L"]},registerPattern(e,t){if(!e||"string"!=typeof e)throw new Error("Gesture pattern name must be a non-empty string");if(!Array.isArray(t)||0===t.length)throw new Error("Gesture directions must be a non-empty array");const n=["R","L","U","D"];for(let e=0;e<t.length;e++)if(!n.includes(t[e]))throw new Error(`Invalid direction "${t[e]}". Must be one of: R, L, U, D`);this.patterns[e],this.patterns[e]=t},unregisterPattern(e){const t=e in this.patterns;return t&&delete this.patterns[e],t},startRecording(e){this.gestureContainer=this.findContainer(e.target),this.isRecording=!0,this.gesturePoints=[{x:e.clientX,y:e.clientY,time:Date.now()}],this.startTime=Date.now()},recordPoint(e){const t=this.gesturePoints[this.gesturePoints.length-1],n=e.clientX-t.x,r=e.clientY-t.y;Math.sqrt(n*n+r*r)>=this.MIN_DISTANCE&&this.gesturePoints.push({x:e.clientX,y:e.clientY,time:Date.now()})},stopRecording(e){this.isRecording=!1;const t=Date.now()-this.startTime;if(this.gesturePoints.length<2||t>this.MAX_GESTURE_TIME)return void(this.gesturePoints=[]);const n=this.extractDirections();if(0===n.length)return void(this.gesturePoints=[]);const r=this.matchPattern(n);this.gestureJustDispatched=!0,r&&this.gestureContainer&&this.dispatchGesture(e,r,n),this.gesturePoints=[],this.gestureContainer=null},extractDirections(){if(this.gesturePoints.length<2)return[];const e=[],t=this.MIN_SEGMENT_LENGTH*this.MIN_SEGMENT_LENGTH;let n=this.gesturePoints[0],r=this.gesturePoints[0],i=null;for(let o=1;o<this.gesturePoints.length;o++){const a=this.gesturePoints[o],s=a.x-this.gesturePoints[o-1].x,c=a.y-this.gesturePoints[o-1].y,l=this.getDirection(s,c);if(l)if(l===i)r=a;else{if(null!==i){const o=r.x-n.x,a=r.y-n.y;o*o+a*a>=t&&e.push(i)}i=l,n=r,r=a}}if(null!==i){const o=r.x-n.x,a=r.y-n.y;o*o+a*a>=t&&e.push(i)}return e},getDirection(e,t){if(0===e&&0===t)return null;const n=e*e,r=t*t,i=this.DIRECTION_THRESHOLD*this.DIRECTION_THRESHOLD,o=(1-i)/i;return n>o*r?e>0?"R":"L":r>o*n?t>0?"D":"U":e>0?n>r?"R":t>0?"D":"U":n>r?"L":t>0?"D":"U"},matchPattern(e){const t=e.join("");for(const e in this.patterns)if(this.patterns[e].join("")===t)return e;return null},findContainer(e){for(e&&e.nodeType===Node.ELEMENT_NODE||(e=e?.parentElement);e&&e!==document.body;){const t=e.getAttribute("data-pac-id");if(t){const e=window.PACRegistry.get(t);if(e)return e.container}e=e.parentElement}return null},dispatchGesture(e,t,n){const r=this.gesturePoints,i=r.length,o=Date.now();let a=r[0].x,s=a,c=r[0].y,l=c;for(let e=1;e<i;e++){const{x:t,y:n}=r[e];a=Math.min(a,t),s=Math.max(s,t),c=Math.min(c,n),l=Math.max(l,n)}const h=this.gestureContainer.getBoundingClientRect(),u=e=>e-h.left,d=e=>e-h.top,p=Math.max(0,Math.min(65535,Math.round((a+s)/2-h.left))),f=Math.max(0,Math.min(65535,Math.round((c+l)/2-h.top))),g=u(r[0].x),m=d(r[0].y),y=u(r[i-1].x),E=d(r[i-1].y),b=u(a),v=d(c),C=s-a,_=l-c,w=new CustomEvent("pac:event",{bubbles:!1,cancelable:!0,detail:{}});w.message=592,w.wParam=0,w.lParam=f<<16|p,w.timestamp=o,w.originalEvent=e,w.pattern=t,w.directions=n,w.pointCount=i,w.gestureStartX=g,w.gestureStartY=m,w.gestureEndX=y,w.gestureEndY=E,w.gestureDuration=o-this.startTime,w.gestureBounds={x:b,y:v,left:b,top:v,right:b+C,bottom:v+_,width:C,height:_},this.gestureContainer.dispatchEvent(w)}};function F(){this.components=new Map,this.pendingHierarchy=new Set,this.hierarchyTimer=null}function L(e,t={},n={}){x.initialize(),I.initialize();const r=document.querySelectorAll(e),i=!e.startsWith("#");if(0===r.length)return i?[]:void 0;const o=[];return r.forEach(r=>{let i=r.getAttribute("data-pac-id");i||(i=r.id||N.uniqid("pac-"),r.setAttribute("data-pac-id",i));const a=window.PACRegistry.get(i);if(a)return void o.push(a.abstraction);const s=Object.assign({updateMode:"immediate",delay:300},n),c=new V(r,t,s);if(window.PACRegistry.register(i,c),c.abstraction.init&&"function"==typeof c.abstraction.init)try{c.abstraction.init.call(c.abstraction)}catch(e){}document.dispatchEvent(new CustomEvent("pac:component-ready",{detail:{component:c,selector:e,pacId:i}})),o.push(c.abstraction)}),i?o:o[0]}F.prototype={register(e,t){this.components.set(e,t),this.pendingHierarchy.add(t),clearTimeout(this.hierarchyTimer),this.hierarchyTimer=setTimeout(()=>{this.establishAllHierarchies()},10)},deregister(e){const t=this.components.get(e);t&&(this.pendingHierarchy.delete(t),this.components.delete(e))},get(e){return this.components.get(e)},getByElement(e){const t=e.closest("[data-pac-id]"),n=t?.getAttribute("data-pac-id");return n?this.get(n):void 0},establishAllHierarchies(){if(0===this.pendingHierarchy.size)return;const e=this.buildHierarchyMap(),t=Array.from(this.pendingHierarchy);this.pendingHierarchy.clear(),t.forEach(t=>{const n=e.get(t.container);n?t.establishHierarchy(n.parent,n.children):t.establishHierarchy(null,[])}),this.pendingHierarchy.size>0&&(clearTimeout(this.hierarchyTimer),this.hierarchyTimer=setTimeout(()=>{this.establishAllHierarchies()},10))},buildHierarchyMap(){const e=new Map;this.components.forEach(t=>{e.set(t.container,t)});const t=new Map;return this.components.forEach(n=>{const r=n.container;let i=null,o=r.parentElement;for(;o;){if(e.has(o)){i=e.get(o);break}o=o.parentElement}t.has(r)||t.set(r,{parent:null,children:[]}),t.get(r).parent=i,i&&(t.has(i.container)||t.set(i.container,{parent:null,children:[]}),t.get(i.container).children.push(n))}),t}},L.createPacMessage=function(e,t,n,r={}){const i=new CustomEvent("pac:event",{bubbles:!1,cancelable:!0,detail:r});return Object.defineProperties(i,{message:{value:e,enumerable:!0},wParam:{value:t,enumerable:!0},lParam:{value:n,enumerable:!0},timestamp:{value:Date.now(),enumerable:!0}}),i},L.getContainerByPacId=function(e){const t=window.PACRegistry.get(e);return t?t.container:null},L.postMessage=function(e,t,n,r,i={}){const o=this.getContainerByPacId(e);if(!o)return;const a=this.createPacMessage(t,n,r,i);setTimeout(function(){o.isConnected&&x.dispatchToContainer(o,a)},0)},L.sendMessage=function(e,t,n,r,i={}){const o=this.getContainerByPacId(e);if(!o)return;const a=this.createPacMessage(t,n,r,i);x.dispatchToContainer(o,a)},L.broadcastMessage=function(e,t,n,r={}){const i=this.createPacMessage(e,t,n,r);window.PACRegistry.components.forEach(e=>{x.dispatchToContainer(e.container,i)})},L.setTimer=function(e,t){const n=window.PACRegistry.get(e);return n?n.setTimer(t):null},L.killTimer=function(e,t){const n=window.PACRegistry.get(e);return!!n&&n.killTimer(t)},L.killAllTimers=function(e){const t=window.PACRegistry.get(e);return t?t.killAllTimers():0},L.registerBinding=function(e,t){if(!e||"string"!=typeof e)throw new Error("Binding name must be a non-empty string");if("function"!=typeof t)throw new Error("Binding handler must be a function");K[e],K[e]=t},L.LOWORD=function(e){return 65535&e},L.HIWORD=function(e){return e>>16&65535},L.MAKEPOINTS=function(e){return{x:65535&e,y:e>>16&65535}},L.GET_WHEEL_DELTA=function(e){return(e>>16&65535)<<16>>16},L.GET_KEYSTATE=function(e){return 65535&e},L.GET_REPEAT_COUNT_LPARAM=function(e){return 65535&e},L.getKeyName=N.getKeyName.bind(N),L.registerGesture=function(e,t){return k.registerPattern(e,t)},L.unregisterGesture=function(e){return k.unregisterPattern(e)},L.setCapture=function(e){const t=window.PACRegistry.get(e);if(t)return x.setCapture(t.container)},L.releaseCapture=function(){return x.releaseCapture()},L.hasCapture=function(){return x.hasCapture()},L.getCapture=function(){if(!x._captureActive)return null;const e=x._capturedContainer?.getAttribute("data-pac-id");return e||null},L.ptInElement=function(e,t,n){if(!n)return!1;const r=n.getBoundingClientRect();return e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom},L.elementFromPoint=function(e,t){return document.elementFromPoint(e,t)},L.containerFromPoint=function(e,t){const n=L.elementFromPoint(e,t);return n?n.closest("[data-pac-id]"):null},window.PACRegistry=window.PACRegistry||new F,window.wakaPAC=L,Object.assign(L,{MSG_UNKNOWN:0,MSG_MOUSEMOVE:u,MSG_LBUTTONDOWN:d,MSG_LBUTTONUP:p,MSG_LBUTTONDBLCLK:f,MSG_RBUTTONDOWN:516,MSG_RBUTTONUP:g,MSG_MBUTTONDOWN:519,MSG_MBUTTONUP:m,MSG_LCLICK:y,MSG_MCLICK:E,MSG_RCLICK:b,MSG_CHAR:768,MSG_CHANGE:v,MSG_SUBMIT:C,MSG_INPUT:771,MSG_INPUT_COMPLETE:_,MSG_SETFOCUS:7,MSG_KILLFOCUS:8,MSG_KEYDOWN:256,MSG_KEYUP:257,MSG_USER:4096,MSG_TIMER:275,MSG_COPY:w,MSG_PASTE:T,MSG_MOUSEWHEEL:A,MSG_GESTURE:592,MSG_SIZE:5,MSG_MOUSEENTER:523,MSG_MOUSELEAVE:524,MSG_CAPTURECHANGED:533,MK_LBUTTON:1,MK_RBUTTON:2,MK_MBUTTON:4,MK_SHIFT:8,MK_CONTROL:16,MK_ALT:32,KM_SHIFT:M,KM_CONTROL:P,KM_ALT:S,SIZE_RESTORED:0,SIZE_HIDDEN:1,SIZE_FULLSCREEN:2,VK_BACK:8,VK_TAB:9,VK_RETURN:13,VK_SHIFT:16,VK_CONTROL:17,VK_MENU:18,VK_PAUSE:19,VK_CAPITAL:20,VK_ESCAPE:27,VK_SPACE:32,VK_PRIOR:33,VK_NEXT:34,VK_END:35,VK_HOME:36,VK_LEFT:37,VK_UP:38,VK_RIGHT:39,VK_DOWN:40,VK_SNAPSHOT:44,VK_INSERT:45,VK_DELETE:46,VK_0:48,VK_1:49,VK_2:50,VK_3:51,VK_4:52,VK_5:53,VK_6:54,VK_7:55,VK_8:56,VK_9:57,VK_A:65,VK_B:66,VK_C:67,VK_D:68,VK_E:69,VK_F:70,VK_G:71,VK_H:72,VK_I:73,VK_J:74,VK_K:75,VK_L:76,VK_M:77,VK_N:78,VK_O:79,VK_P:80,VK_Q:81,VK_R:82,VK_S:83,VK_T:84,VK_U:85,VK_V:86,VK_W:87,VK_X:88,VK_Y:89,VK_Z:90,VK_LWIN:91,VK_RWIN:92,VK_APPS:93,VK_NUMPAD0:96,VK_NUMPAD1:97,VK_NUMPAD2:98,VK_NUMPAD3:99,VK_NUMPAD4:100,VK_NUMPAD5:101,VK_NUMPAD6:102,VK_NUMPAD7:103,VK_NUMPAD8:104,VK_NUMPAD9:105,VK_MULTIPLY:106,VK_ADD:107,VK_SUBTRACT:109,VK_DECIMAL:110,VK_DIVIDE:111,VK_F1:112,VK_F2:113,VK_F3:114,VK_F4:115,VK_F5:116,VK_F6:117,VK_F7:118,VK_F8:119,VK_F9:120,VK_F10:121,VK_F11:122,VK_F12:123,VK_NUMLOCK:144,VK_SCROLL:145,VK_BROWSER_BACK:166,VK_BROWSER_FORWARD:167,VK_BROWSER_REFRESH:168,VK_BROWSER_STOP:169,VK_BROWSER_SEARCH:170,VK_BROWSER_FAVORITES:171,VK_BROWSER_HOME:172,VK_VOLUME_MUTE:181,VK_VOLUME_DOWN:182,VK_VOLUME_UP:183,VK_MEDIA_NEXT_TRACK:176,VK_MEDIA_PREV_TRACK:177,VK_MEDIA_STOP:178,VK_MEDIA_PLAY_PAUSE:179,VK_OEM_1:186,VK_OEM_PLUS:187,VK_OEM_COMMA:188,VK_OEM_MINUS:189,VK_OEM_PERIOD:190,VK_OEM_2:191,VK_OEM_3:192,VK_OEM_4:219,VK_OEM_5:220,VK_OEM_6:221,VK_OEM_7:222,VK_OEM_102:226}),L.mouseMoveThrottleFps=60}();
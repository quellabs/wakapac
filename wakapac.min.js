!function(){"use strict";const e=["push","pop","shift","unshift","splice","sort","reverse"],t=["readonly","required","selected","checked","hidden","multiple"],i=["input","change","click","submit","focus","blur","keyup","keydown"],n={visible:"visible",checked:"checked",value:"input",class:"class",style:"style"},r={enter:"Enter",escape:"Escape",esc:"Escape",space:" ",tab:"Tab",delete:["Delete","Backspace"],del:["Delete","Backspace"],up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight"},s={isReactive(e){return!(!e||"object"!=typeof e||!this.isPlainObject(e)&&!Array.isArray(e))},shouldPropertyBeReactive(e,t){return!e.startsWith("_")&&!e.startsWith("$")&&"constructor"!==e&&"prototype"!==e&&"__proto__"!==e&&(null==t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t||this.isReactive(t))},isPlainObject(e){if("object"!=typeof e||null===e)return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===Object.prototype},isEqual(e,t){if(e===t)return!0;if("number"==typeof e&&"number"==typeof t&&Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t||typeof e!=typeof t||"object"!=typeof e)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every((e,i)=>s.isEqual(e,t[i]));const i=Object.keys(e),n=Object.keys(t);return i.length===n.length&&i.every(i=>t.hasOwnProperty(i)&&s.isEqual(e[i],t[i]))},isEventType:e=>/^(click|submit|change|input|focus|blur|key(up|down))$/.test(e),getNestedValue:(e,t)=>t?t.split(".").reduce((e,t)=>e&&e.hasOwnProperty(t)?e[t]:void 0,e):e,formatValue:e=>null==e?"":String(e),sanitizeUserInput(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML},escapeHTML:e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};function a(){this.components=new Map,this.hierarchyCache=new WeakMap}function o(t,i,n=""){if(!s.isReactive(t))return t;!function(e,t,i){Object.keys(e).forEach(n=>{e.hasOwnProperty(n)&&s.isReactive(e[n])&&(e[n]=o(e[n],t,i?`${i}.${n}`:n))}),Array.isArray(e)&&e.forEach((n,r)=>{s.isReactive(n)&&(e[r]=o(n,t,i?`${i}.${r}`:r))})}(t,i,n);const r={},a=Array.isArray(t);a&&e.forEach(e=>{r[e]=t[e]});const c=function(e,t,i,n){return function(r){return function(...a){const c=t[r].apply(e,a);return/^(push|unshift|splice)$/.test(r)&&e.forEach((t,r)=>{s.isReactive(t)&&!t._isReactive&&(e[r]=o(t,i,`${n}.${r}`))}),i(n||"root",e,"array-mutation",{method:r,args:a}),c}}}(t,r,i,n),l=function(e,t,i){return function(n,r){return e&&t[r]?i(r):n[r]}}(a,r,c),d=function(e,t){return function(i,n,r){const a=i[n];return s.isReactive(r)&&(r=o(r,e,t?`${t}.${n}`:n)),i[n]=r,s.isEqual(a,r)||e(t?`${t}.${n}`:n,r,"set",{oldValue:a}),!0}}(i,n),h=function(e,t){return function(i,n){const r=i[n];return delete i[n],e(t?`${t}.${n}`:n,void 0,"delete",{oldValue:r}),!0}}(i,n);return new Proxy(t,{get:l,set:d,deleteProperty:h})}a.prototype={register(e,t){this.components.set(e,t),this.hierarchyCache=new WeakMap},unregister(e){const t=this.components.get(e);return t&&(this.components.delete(e),this.hierarchyCache=new WeakMap,0===this.components.size&&window._wakaPACViewportComponents&&window._wakaPACViewportComponents.clear()),t},getHierarchy(e){if(this.hierarchyCache.has(e))return this.hierarchyCache.get(e);let t=null,i=e.parentElement;for(;i&&!t;)this.components.forEach(e=>{e.container===i&&(t=e)}),i=i.parentElement;const n=[];this.components.forEach(t=>{e.contains(t.container)&&t.container!==e&&n.push(t)});const r={parent:t,children:n};return this.hierarchyCache.set(e,r),r}};const c={cache:new Map,bindingCache:new Map,tokens:[],currentToken:0,OPERATOR_PRECEDENCE:{"||":1,"&&":2,"===":6,"!==":6,"==":6,"!=":6,"<":7,">":7,"<=":7,">=":7,"+":8,"-":8,"*":9,"/":9,"!":10,"unary-":10,"unary+":10},OPERATOR_TYPES:{"||":"logical","&&":"logical","===":"comparison","!==":"comparison","==":"comparison","!=":"comparison",">=":"comparison","<=":"comparison",">":"comparison","<":"comparison","+":"arithmetic","-":"arithmetic","*":"arithmetic","/":"arithmetic"},createHelpfulError(e,t){let i=`Expression parsing failed: "${e}"\n`;i+=`Original error: ${t.message}\n`,t.message.includes('Expected ":" after object key')&&e.includes("?")&&e.includes("{")&&(i+="\nSuggestion: Ternary operators cannot be used as object keys in class bindings.\n",i+=`Try removing the braces: ${e.replace(/^\{|\}$/g,"").trim()}\n`,i+="Or use object syntax: { className: condition, otherClass: !condition }");const n=new Error(i);return n.originalError=t,n.expression=e,n},parseExpression(e){if("object"==typeof e&&null!==e){if(e.dependencies)return e;const t=this.extractDependencies(e);return Object.assign({},e,{dependencies:t})}if(e=String(e).trim(),this.cache.has(e))return this.cache.get(e);try{if(this.tokens=this.tokenize(e),this.currentToken=0,0===this.tokens.length)return null;const t=this.parseTernary();return t&&(t.dependencies=this.extractDependencies(t)),this.cache.set(e,t),t}catch(t){throw this.createHelpfulError(e,t)}},tokenize(e){const t=[];let i=0;for(;i<e.length;){const n=e[i];if(/\s/.test(n)){i++;continue}if('"'===n||"'"===n){const n=this.tokenizeString(e,i);t.push(n.token),i=n.nextIndex;continue}if(/\d/.test(n)||"."===n&&/\d/.test(e[i+1])){const n=this.tokenizeNumber(e,i);t.push(n.token),i=n.nextIndex;continue}const r=/^(===|!==|==|!=|>=|<=|&&|\|\|)/.exec(e.slice(i));if(r){const e=r[1];t.push({type:"OPERATOR",value:e,precedence:this.getOperatorPrecedence(e)}),i+=e.length;continue}const s={"(":"LPAREN",")":"RPAREN","{":"LBRACE","}":"RBRACE","[":"LBRACKET","]":"RBRACKET",",":"COMMA",".":"DOT"};if(s[n])t.push({type:s[n],value:n}),i++;else{if("+-*/<>!?:".includes(n)){const e=this.getOperatorPrecedence(n);let r;switch(n){case"?":r="QUESTION";break;case":":r="COLON";break;default:r="OPERATOR"}t.push({type:r,value:n,precedence:e}),i++;continue}if(/[a-zA-Z_$]/.test(n)){const n=this.tokenizeIdentifier(e,i);t.push(n.token),i=n.nextIndex;continue}i++}}return t},tokenizeString(e,t){const i=e[t];let n=t+1,r="";for(;n<e.length;){const t=e[n];if("\\"===t&&n+1<e.length){const s=e[n+1];s===i||"\\"===s?(r+=s,n+=2):(r+=t,n++)}else{if(t===i)return{token:{type:"STRING",value:r},nextIndex:n+1};r+=t,n++}}throw new Error(`Unterminated string literal starting at position ${t}: expected closing ${i}`)},tokenizeNumber(e,t){const i=/^(\d*\.?\d+(?:[eE][+-]?\d+)?)/.exec(e.slice(t));if(i)return{token:{type:"NUMBER",value:parseFloat(i[1])},nextIndex:t+i[1].length}},tokenizeIdentifier(e,t){const i=/^([a-zA-Z_$][a-zA-Z0-9_$]*)/.exec(e.slice(t));if(i){const e=i[1];return{token:{type:["true","false","null","undefined"].includes(e)?"KEYWORD":"IDENTIFIER",value:e},nextIndex:t+e.length}}},getOperatorPrecedence(e){return this.OPERATOR_PRECEDENCE[e]||0},parseTernary(){let e=this.parseBinaryExpression();if(this.match("QUESTION")){const t=this.parseTernary();return this.consume("COLON",'Expected ":" in ternary expression'),{type:"ternary",condition:e,trueValue:t,falseValue:this.parseTernary()}}return e},parseBinaryExpression(){return this.parseBinaryWithPrecedence(1)},parseBinaryWithPrecedence(e){let t=this.parseUnary();for(;"OPERATOR"===this.peek().type;){const i=this.getOperatorPrecedence(this.peek().value);if(i<e)break;const n=this.advance().value,r=this.parseBinaryWithPrecedence(i+1);t={type:this.OPERATOR_TYPES[n]||"arithmetic",left:t,operator:n,right:r}}return t},parseUnary(){return this.matchOperator("!","-","+")?{type:"unary",operator:this.previous().value,operand:this.parseUnary()}:this.parsePrimary()},parsePrimary(){if(this.match("LPAREN")){const e=this.parseTernary();return this.consume("RPAREN","Expected closing parenthesis"),{type:"parentheses",inner:e}}if(this.match("LBRACE"))return this.parseObjectLiteral();if(this.check("STRING"))return{type:"literal",value:this.advance().value};if(this.check("NUMBER"))return{type:"literal",value:this.advance().value};if(this.check("KEYWORD")){let e;switch(this.advance().value){case"true":e=!0;break;case"false":e=!1;break;case"null":e=null;break;case"undefined":e=void 0}return{type:"literal",value:e}}return this.check("IDENTIFIER")?this.parsePropertyAccess():null},parseObjectLiteral(){const e=[];if(!this.check("RBRACE"))do{let t;if(this.check("STRING"))t=this.advance().value;else{if(!this.check("IDENTIFIER"))throw new Error("Expected property name");t=this.advance().value}this.consume("COLON",'Expected ":" after object key');const i=this.parseTernary();e.push({key:t,value:i})}while(this.match("COMMA")&&!this.check("RBRACE"));return this.consume("RBRACE","Expected closing brace"),{type:"object",pairs:e}},parsePropertyAccess(){let e=this.advance().value;for(;;)if(this.match("DOT")){if(!this.check("IDENTIFIER"))throw new Error('Expected property name after "."');e+="."+this.advance().value}else{if(!this.match("LBRACKET"))break;{const t=this.parseTernary();this.consume("RBRACKET","Expected closing bracket"),"literal"===t.type?e+=`[${JSON.stringify(t.value)}]`:e+=`[${this.reconstructExpression(t)}]`}}return{type:"property",path:e}},reconstructExpression(e){if(!e)return"";switch(e.type){case"literal":return"string"==typeof e.value?`"${e.value}"`:String(e.value);case"property":return e.path;case"arithmetic":return`${this.reconstructExpression(e.left)} ${e.operator} ${this.reconstructExpression(e.right)}`;default:return"unknown"}},match(...e){for(const t of e)if(this.check(t))return this.advance(),!0;return!1},matchOperator(...e){if(this.check("OPERATOR")){const t=this.peek();if(e.includes(t.value))return this.advance(),!0}return!1},check(e){return!this.isAtEnd()&&this.peek().type===e},advance(){return this.isAtEnd()||this.currentToken++,this.previous()},isAtEnd(){return this.currentToken>=this.tokens.length},peek(){return this.tokens[this.currentToken]||{type:"EOF",value:null}},previous(){return this.tokens[this.currentToken-1]},consume(e,t){if(this.check(e))return this.advance();throw new Error(t+` at token: ${JSON.stringify(this.peek())}`)},evaluate(e,t){if(e)switch(e.type){case"literal":return e.value;case"property":return s.getNestedValue(t,e.path);case"parentheses":return this.evaluate(e.inner,t);case"object":return this.evaluateObjectLiteral(e,t);case"ternary":return this.evaluate(e.condition,t)?this.evaluate(e.trueValue,t):this.evaluate(e.falseValue,t);case"logical":const i=this.evaluate(e.left,t);return"&&"===e.operator?!!i&&this.evaluate(e.right,t):"||"===e.operator&&(!!i||this.evaluate(e.right,t));case"comparison":case"arithmetic":const n=this.evaluate(e.left,t),r=this.evaluate(e.right,t);return this.performOperation(n,e.operator,r);case"unary":const a=this.evaluate(e.operand,t);switch(e.operator){case"!":return!a;case"-":return-a;case"+":return+a;default:return a}default:return}},evaluateObjectLiteral(e,t){const i={};return e.pairs&&e.pairs.forEach(({key:e,value:n})=>{i[e]=this.evaluate(n,t)}),i},performOperation(e,t,i){switch(t){case"+":return e+i;case"-":return Number(e)-Number(i);case"*":return Number(e)*Number(i);case"/":return Number(e)/Number(i);case"===":return e===i;case"!==":return e!==i;case"==":return e==i;case"!=":return e!=i;case">=":return e>=i;case"<=":return e<=i;case">":return e>i;case"<":return e<i;default:return!1}},extractDependencies(e){if(!e)return[];const t=new Set,i=e=>{if(e)switch(e.type){case"property":const n=e.path.split(/[.\[]/,1)[0];n&&!["true","false","null","undefined"].includes(n)&&t.add(n);break;case"ternary":i(e.condition),i(e.trueValue),i(e.falseValue);break;case"logical":case"comparison":case"arithmetic":i(e.left),i(e.right);break;case"unary":i(e.operand);break;case"parentheses":i(e.inner);break;case"object":e.pairs&&e.pairs.forEach(e=>i(e.value))}};return i(e),Array.from(t)},parseBindingString(e){if(this.bindingCache.has(e))return this.bindingCache.get(e);const t=[];let i="",n=!1,r="",s=0,a=0;for(let o=0;o<e.length;o++){const c=e[o],l=o>0&&"\\"===e[o-1];'"'!==c&&"'"!==c||l||(n?c===r&&(n=!1,r=""):(n=!0,r=c)),n||("("===c?s++:")"===c?s--:"{"===c?a++:"}"===c&&a--),","!==c||n||0!==s||0!==a?i+=c:(this.addBindingPairIfValid(i,t),i="")}return this.addBindingPairIfValid(i,t),this.bindingCache.set(e,t),t},addBindingPairIfValid(e,t){const i=e.trim();if(!i)return;const n=this.findBindingColon(i);-1===n?t.push({type:i,target:""}):t.push({type:i.substring(0,n).trim(),target:i.substring(n+1).trim()})},findBindingColon(e){const t=["value","checked","visible","if","foreach","class","style","click","change","input","submit","focus","blur","keyup","keydown"];for(const i of t)if(e.startsWith(i+":"))return i.length;let i=!1,n="",r=0;for(let t=0;t<e.length;t++){const s=e[t],a=t>0&&"\\"===e[t-1];if('"'!==s&&"'"!==s||a||(i?s===n&&(i=!1,n=""):(i=!0,n=s)),!i)if("("===s)r++;else if(")"===s)r--;else if(":"===s&&0===r)return t}return-1}};function l(e,a={},l={}){const d=document.querySelector(e);if(!d)throw new Error(`Container not found: ${e}`);const h={selector:e,container:d,config:Object.assign({updateMode:"immediate",delay:300},l),original:a,abstraction:null,bindings:new Map,bindingIndex:new Map,deps:new Map,expressionCache:new Map,lastValues:new Map,pendingUpdates:null,pendingValues:null,updateTimeouts:new Map,parent:null,children:new Set,eventListeners:new Map,initialize(){return this.setupBindings(),this.abstraction=this.createReactiveAbstraction(),this.setupEventHandling(),this.setupViewportTracking(),this.performInitialUpdate(),this},createReactiveAbstraction(){const e={};return this.setupBrowserProperties(e),this.setupComputedProperties(e),Object.keys(this.original).forEach(t=>{if(this.original.hasOwnProperty(t)&&"computed"!==t){const i=this.original[t];"function"==typeof i?e[t]=i.bind(e):s.shouldPropertyBeReactive(t,i)?this.createReactiveProperty(e,t,i):e[t]=i}}),Object.assign(e,{notifyParent:(e,t)=>this.notifyParent(e,t),sendToChildren:(e,t)=>this.sendToChildren(e,t),sendToChild:(e,t,i)=>this.sendToChild(e,t,i),findChild:e=>Array.from(this.children).find(e),toJSON:()=>this.serializeToJSON(),control:(e,t={})=>this.makeHttpRequest(e,t)}),e},setupComputedProperties(e){this.original.computed&&Object.keys(this.original.computed).forEach(t=>{const i=this.original.computed[t],n=this.analyzeComputedDependencies(i,e);this.deps.set(t,{fn:i,value:void 0,isDirty:!0}),n.forEach(e=>{this.deps.has(e)||this.deps.set(e,{dependents:[]}),this.deps.get(e).dependents=this.deps.get(e).dependents||[],this.deps.get(e).dependents.push(t)}),Object.defineProperty(e,t,{get:()=>{const i=this.deps.get(t);return(i.isDirty||void 0===i.value)&&(i.value=i.fn.call(e),i.isDirty=!1),i.value},enumerable:!0})})},analyzeComputedDependencies(e,t){const i=[],n=/this\.([a-zA-Z_$][a-zA-Z0-9_$]*)/g;let r;for(;r=n.exec(e.toString());){const e=r[1];!this.original.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this.original.computed&&this.original.computed.hasOwnProperty(e)||i.includes(e)||i.push(e)}return i},setupBrowserProperties(e){this.createReactiveProperty(e,"browserVisible",!document.hidden),this.createReactiveProperty(e,"browserScrollX",window.scrollX),this.createReactiveProperty(e,"browserScrollY",window.scrollY),this.createReactiveProperty(e,"browserViewportHeight",window.innerHeight),this.createReactiveProperty(e,"browserViewportWidth",window.innerWidth),this.createReactiveProperty(e,"browserDocumentWidth",document.documentElement.scrollWidth),this.createReactiveProperty(e,"browserDocumentHeight",document.documentElement.scrollHeight),this.createReactiveProperty(e,"containerVisible",!1),this.createReactiveProperty(e,"containerFullyVisible",!1),this.createReactiveProperty(e,"containerClientRect",{top:0,left:0,right:0,bottom:0,width:0,height:0,x:0,y:0}),this.createReactiveProperty(e,"containerWidth",0),this.createReactiveProperty(e,"containerHeight",0),this.setupGlobalBrowserListeners()},setupGlobalBrowserListeners(){if(window._wakaPACBrowserListeners)return;window._wakaPACBrowserListeners=!0;const e=()=>{window.PACRegistry&&window.PACRegistry.components.size>0&&window.PACRegistry.components.forEach(e=>{e.abstraction.browserVisible=!document.hidden})},t=()=>{clearTimeout(window._wakaPACScrollTimeout),window._wakaPACScrollTimeout=setTimeout(()=>{window.PACRegistry&&window.PACRegistry.components.size>0&&window.PACRegistry.components.forEach(e=>{e.abstraction.browserScrollX=window.scrollX,e.abstraction.browserScrollY=window.scrollY})},16)},i=()=>{clearTimeout(window._wakaPACResizeTimeout),window._wakaPACResizeTimeout=setTimeout(()=>{window.PACRegistry&&window.PACRegistry.components.size>0&&window.PACRegistry.components.forEach(e=>{e.abstraction.browserViewportWidth=window.innerWidth,e.abstraction.browserViewportHeight=window.innerHeight,e.abstraction.browserDocumentWidth=document.documentElement.scrollWidth,e.abstraction.browserDocumentHeight=document.documentElement.scrollHeight,e.abstraction.browserScrollX=window.scrollX,e.abstraction.browserScrollY=window.scrollY})},100)};window._wakaPACGlobalHandlers={visibility:e,scroll:t,resize:i},document.addEventListener("visibilitychange",e),window.addEventListener("scroll",t),window.addEventListener("resize",i)},setupViewportTracking(){this.setupIntersectionObserver(),this.updateContainerVisibility()},setupIntersectionObserver(){this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.target===this.container){const t=e.boundingClientRect,i=e.isIntersecting,n=e.intersectionRatio>=.99;this.abstraction.containerVisible=i,this.abstraction.containerFullyVisible=n,this.abstraction.containerWidth=t.width,this.abstraction.containerHeight=t.height,this.abstraction.containerClientRect={top:t.top,left:t.left,right:t.right,bottom:t.bottom,width:t.width,height:t.height,x:t.x,y:t.y}}})},{threshold:[0,1]}),this.intersectionObserver.observe(this.container)},updateContainerVisibility(){const e=window.innerHeight,t=window.innerWidth,i=this.container.getBoundingClientRect(),n={top:i.top,left:i.left,right:i.right,bottom:i.bottom,width:i.width,height:i.height,x:i.x,y:i.y};if(this.abstraction.containerClientRect=n,this.abstraction.containerWidth=n.width,this.abstraction.containerHeight=n.height,!(n.top<e&&n.bottom>0&&n.left<t&&n.right>0))return this.abstraction.containerVisible=!1,void(this.abstraction.containerFullyVisible=!1);const r=n.top>=0&&n.bottom<=e&&n.left>=0&&n.right<=t;this.abstraction.containerVisible=!0,this.abstraction.containerFullyVisible=r},createReactiveProperty(e,t,i){let n=i;s.isReactive(n)&&(n=o(n,(e,t,i,n)=>{this.notifyChange(e,t,i,n)},t)),Object.defineProperty(e,t,{get:()=>n,set:e=>{const i=n;!s.isReactive(n)&&!s.isReactive(e)&&s.isEqual(n,e)||(s.isReactive(e)&&(e=o(e,(e,t,i,n)=>{this.notifyChange(e,t,i,n)},t)),n=e,this.notifyChange(t,e,"set",{oldValue:i}))},enumerable:!0})},triggerWatcher(e,t,i,n=null){if(this.original.watch){if(this.original.watch[e])try{this.original.watch[e].call(this.abstraction,t,i)}catch(e){}n&&Object.keys(this.original.watch).forEach(e=>{if((e.includes(".")||e.includes("*"))&&this.matchesWatchPattern(e,n)){const r=this.original.watch[e];if("function"==typeof r)try{r.call(this.abstraction,t,i,n)}catch(e){}}})}},matchesWatchPattern(e,t){if(e.includes("**")){const i=e.replace(".**","");return t===i||t.startsWith(i+".")}return e.includes("*")?this.matchesSingleWildcard(e,t):e===t},matchesSingleWildcard(e,t){const i=e.split("."),n=t.split(".");return i.length===n.length&&i.every((e,t)=>"*"===e||e===n[t])},setupBindings(){this.setupTextBindings(),this.setupAttributeBindings(),this.buildBindingIndex()},setupTextBindings(){const e=document.createTreeWalker(this.container,NodeFilter.SHOW_TEXT,null);let t;for(;t=e.nextNode();){const e=t.textContent,i=e.match(/\{\{\s*([^}]+)\s*\}\}/g);i&&i.forEach((i,n)=>{const r=i.replace(/^\{\{\s*|\s*\}\}$/g,"").trim(),s=this.createBinding("text",t,{target:r,originalText:e,fullMatch:i,parsedExpression:null,dependencies:null});this.bindings.set(s.id,s)})}},setupAttributeBindings(){const e=this.container.querySelectorAll("[data-pac-bind]");Array.from(e).forEach(e=>{const t=e.getAttribute("data-pac-bind"),i=c.parseBindingString(t);this.reorderBindings(i).forEach(({type:t,target:i})=>{const n=this.createBindingByType(e,t,i);n&&this.bindings.set(n.id,n)})})},buildBindingIndex(){this.bindingIndex.clear(),this.unparsedBindings=new Set,this.bindings.forEach(e=>{e.target&&this.unparsedBindings.add(e)})},getParsedExpression(e){const t=c.parseExpression(e.target),i=t.dependencies||[];return e.isIndexed||(i.forEach(t=>{this.bindingIndex.has(t)||this.bindingIndex.set(t,new Set),this.bindingIndex.get(t).add(e)}),e.isIndexed=!0,e.dependencies=i),t},createBinding(e,t,i){const n={id:Date.now()+"_"+(1e4*Math.random()|0),type:e,element:t,...i};return i.target&&(n.property=i.target.split(".")[0],n.propertyPath=i.target),n},reorderBindings(e){const t={foreach:1,if:2,visible:3,value:4,checked:4,click:5,change:5,input:5,submit:5,focus:5,blur:5,keyup:5,keydown:5};return e.sort((e,i)=>(t[e.type]||6)-(t[i.type]||6))},createBindingByType(e,t,i){switch(t){case"value":return this.createValueBinding(e,i);case"visible":return this.createVisibilityBinding(e,i);case"checked":return this.createCheckedBinding(e,i);case"class":return this.createClassBinding(e,i);case"style":return this.createStyleBinding(e,i);case"if":return this.createConditionalBinding(e,i);case"foreach":return this.createForeachBinding(e,i);default:return s.isEventType(t)?this.createEventBinding(e,t,i):i?this.createAttributeBinding(e,t,i):null}},createForeachBinding(e,t){const i=this.createBinding("foreach",e,{target:t,collection:t,itemName:e.getAttribute("data-pac-item")||"item",indexName:e.getAttribute("data-pac-index")||"index",template:e.innerHTML,previous:[],fingerprints:null});return e.innerHTML="",i},createConditionalBinding(e,t){return this.createBinding("conditional",e,{target:t,parsedExpression:null,dependencies:null,placeholder:null,originalParent:e.parentNode,originalNextSibling:e.nextSibling,isRendered:!0})},createValueBinding(e,t){return this.setupInputElement(e,t),this.createInputBinding(e,t)},createVisibilityBinding(e,t){return this.createBinding("visible",e,{target:t,parsedExpression:null,dependencies:null})},createInputBinding(e,t){return this.createBinding("input",e,{target:t,updateMode:e.getAttribute("data-pac-update-mode")||this.config.updateMode,delay:parseInt(e.getAttribute("data-pac-update-delay"))||this.config.delay})},createCheckedBinding(e,t){return"radio"===e.type?(this.setupInputElement(e,t),this.createInputBinding(e,t)):(this.setupInputElement(e,t,"checked"),this.createBinding("checked",e,{target:t,updateMode:e.getAttribute("data-pac-update-mode")||this.config.updateMode,delay:parseInt(e.getAttribute("data-pac-update-delay"))||this.config.delay}))},createClassBinding:function(e,t){return this.createBinding("class",e,{target:t,parsedExpression:null,dependencies:null})},createEventBinding(e,t,i){return this.createBinding("event",e,{eventType:t,method:i,target:i})},createAttributeBinding(e,t,i){return this.createBinding("attribute",e,{target:i,attribute:t,parsedExpression:null,dependencies:null})},createStyleBinding(e,t){return this.createBinding("style",e,{target:t,parsedExpression:null,dependencies:null})},setupInputElement(e,t,i="value"){e.setAttribute("data-pac-property",t),e.setAttribute("data-pac-binding-type",i),e.setAttribute("data-pac-update-mode",e.getAttribute("data-pac-update")||this.config.updateMode),e.setAttribute("data-pac-update-delay",e.getAttribute("data-pac-delay")||this.config.delay)},shouldUpdateBinding(e,t){return!!(e.property===t||e.propertyPath&&e.propertyPath.startsWith(t+".")||(e.target&&!e.dependencies&&this.getParsedExpression(e),e.dependencies&&e.dependencies.includes(t)))},scheduleUpdate(e,t){this.pendingUpdates||(this.pendingUpdates=new Set,this.pendingValues={},(window.requestAnimationFrame||(e=>setTimeout(e,0)))(()=>{this.flushUpdates()})),this.pendingUpdates.add(e),this.pendingValues[e]=t},flushUpdates(){if(!this.pendingUpdates)return;const e=new Set;this.pendingUpdates.forEach(t=>{(this.bindingIndex.get(t)||new Set).forEach(i=>{this.shouldUpdateBinding(i,t)&&e.add(i)}),this.unparsedBindings.forEach(i=>{i.parsedExpression||(this.getParsedExpression(i),this.unparsedBindings.delete(i)),this.shouldUpdateBinding(i,t)&&e.add(i)})}),e.forEach(e=>{this.updateBinding(e,null,null)}),this.pendingUpdates=null,this.pendingValues=null},updateComputedProperties(e){const t=this.deps.get(e);(t&&t.dependents?t.dependents:[]).forEach(e=>{const t=this.deps.get(e),i=t?t.value:void 0;t&&(t.isDirty=!0);const n=this.abstraction[e];!Array.from(this.bindings.values()).some(t=>"foreach"===t.type&&t.collection===e)&&s.isEqual(i,n)||(this.triggerWatcher(e,n,i),this.scheduleUpdate(e,n),this.updateComputedProperties(e))})},performInitialUpdate(){if(Object.keys(this.abstraction).forEach(e=>{this.abstraction.hasOwnProperty(e)&&"function"!=typeof this.abstraction[e]&&this.scheduleUpdate(e,this.abstraction[e])}),this.original.computed&&Object.keys(this.original.computed).forEach(e=>{this.scheduleUpdate(e,this.abstraction[e])}),this.bindings.forEach(e=>{"foreach"===e.type?(e.previous=[],void 0!==this.abstraction[e.collection]&&this.applyForeachBinding(e,e.collection)):!e.target||"text"===e.type||e.dependencies&&0!==e.dependencies.length||this.updateBinding(e,null,null)}),this.original.init&&"function"==typeof this.original.init)try{this.original.init.call(this.abstraction)}catch(e){}},updateBinding(e,t,i=null){try{switch(e.type){case"text":this.applyTextBinding(e,t,i);break;case"foreach":this.applyForeachBinding(e,t,i);break;case"event":break;default:const n=Object.assign({},this.abstraction,i||{}),r=this.getParsedExpression(e),s=c.evaluate(r,n);switch(e.type){case"attribute":this.applyAttributeBinding(e.element,e.attribute,s);break;case"input":this.applyInputBinding(e.element,s);break;case"checked":this.applyCheckedBinding(e.element,!!s);break;case"visible":this.applyVisibilityBinding(e.element,s);break;case"conditional":this.applyConditionalBinding(e.element,s,e);break;case"class":this.applyClassBinding(e.element,e.target,s);break;case"style":this.applyStyleBinding(e.element,e.target,s)}}}catch(e){}},createForeachItemElement(e){const t=document.createElement("tbody");t.innerHTML=e.trim();const i=Array.from(t.childNodes);if(1===i.length&&i[0].nodeType===Node.ELEMENT_NODE)return i[0].cloneNode(!0);const n=document.createElement("span");return i.forEach(e=>n.appendChild(e.cloneNode(!0))),n},processTextBindingsForElement(e,t){const i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),n=[];let r;for(;r=i.nextNode();)n.push(r);const s=Object.assign({},this.abstraction,t);n.forEach(e=>{const t=e.textContent;/\{\{\s*[^}]+\s*\}\}/.test(t)&&(e.textContent=this.processTextInterpolation(t,s))})},processTextInterpolation(e,t){let i=String(e||"");const n=i.match(/\{\{\s*([^}]+)\s*\}\}/g);return n&&n.forEach(e=>{const n=e.replace(/^\{\{\s*|\s*\}\}$/g,"").trim();try{const r=c.parseExpression(n),a=c.evaluate(r,t),o=s.formatValue(a);i=i.replace(e,o)}catch(e){}}),i},processAttributeBindingsForElement(e,t,i){let n=Array.from(e.querySelectorAll("[data-pac-bind]"));e.hasAttribute("data-pac-bind")&&n.push(e),n.forEach(e=>{const n=e.getAttribute("data-pac-bind");n&&c.parseBindingString(n).forEach(({type:n,target:r})=>{if("foreach"===n)return;if(i&&("value"===n||"checked"===n)&&this.isNestedProperty(r,t)){const s=this.buildNestedPropertyPath(r,t,i.collection,t[i.indexName]);this.setupInputElement(e,s,n)}if(s.isEventType(n)&&i)return void this.handleEventBinding(e,n,r,t[i.itemName],t[i.indexName]);const a=this.createEvaluationBinding(e,n,r);this.updateBinding(a,null,t)})})},createEvaluationBinding(e,t,i){const r=n[t]||"attribute";return{id:"eval_"+Date.now()+"_"+(1e4*Math.random()|0),type:r,element:e,target:i,attribute:"attribute"===r?t:null,parsedExpression:null,dependencies:null}},generateFingerprints(e){return e.map((e,t)=>({index:t,id:this.getItemId(e),hash:this.generateItemHash(e)}))},getItemId(e){return e&&"object"==typeof e?void 0!==e.id?e.id:`hash_${this.generateItemHash(e)}`:e},generateItemHash(e){if(null==e)return"null";if("object"!=typeof e)return`${typeof e}:${e}`;const t=Object.entries(e).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>`${e}:${this.generateItemHash(t)}`);return this.hashString(t.join("|"))},hashString(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t.toString(36)},applyStyleBinding(e,t,i){"string"!=typeof i?"object"!=typeof i||null===i||Array.isArray(i)||Object.keys(i).forEach(t=>{null!=i[t]&&(t.startsWith("--")?e.style.setProperty(t,i[t]):e.style[t]=i[t])}):e.style.cssText=i},renderForeachItem(e,t,i){const n=document.createElement("tbody");n.innerHTML=e.template.trim();const r=Array.from(n.childNodes);if(1===r.length&&r[0].nodeType===Node.ELEMENT_NODE){const n=r[0].cloneNode(!0);return this.processForeachTemplate(n,t,i,e.itemName,e.indexName,e.collection),n}const s=document.createElement("span");return r.forEach(e=>{s.appendChild(e.cloneNode(!0))}),this.processForeachTemplate(s,t,i,e.itemName,e.indexName,e.collection),s},processForeachTemplate(e,t,i,n,r,a,o={}){const l=Object.assign({},o,{[n]:t,[r]:i}),d=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),h=[];let p;for(;p=d.nextNode();)h.push(p);h.forEach(e=>{e.textContent=e.textContent.replace(/\{\{\s*([^}]+)\s*\}\}/g,(e,t)=>{t=t.trim();const i=this.resolveTemplateExpression(t,l);return void 0!==i?s.formatValue(i):e})});const u=this.findDirectChildForeachElements(e);let g=Array.from(e.querySelectorAll("[data-pac-bind]")).filter(e=>!u.includes(e));e.hasAttribute("data-pac-bind")&&g.push(e),g.forEach(e=>{const t=e.getAttribute("data-pac-bind");t&&c.parseBindingString(t).forEach(({type:t,target:n})=>{if("foreach"!==t){if(("value"===t||"checked"===t)&&this.isNestedProperty(n,l)){const r=this.buildNestedPropertyPath(n,l,a,i);this.setupInputElement(e,r,t)}this.processForeachBinding(e,t,n,l)}})}),u.forEach(e=>{const t=e.getAttribute("data-pac-bind").match(/foreach:\s*([^,}]+)/);if(t){const i=t[1].trim(),n=e.getAttribute("data-pac-item")||"item",r=e.getAttribute("data-pac-index")||"index";this.processNestedForeachBinding(e,i,n,r,l)}})},resolveTemplateExpression(e,t){if(t.hasOwnProperty(e))return t[e];for(const[i,n]of Object.entries(t))if(e.startsWith(`${i}.`)){const t=e.substring(i.length+1);return s.getNestedValue(n,t)}return s.getNestedValue(this.abstraction,e)},findDirectChildForeachElements(e){const t=[];return Array.from(e.children).forEach(e=>{const i=e.getAttribute("data-pac-bind");i&&i.includes("foreach:")&&t.push(e)}),t},processNestedForeachBinding(e,t,i,n,r){const s=Object.assign({},this.abstraction,r),a=c.parseExpression(t),o=c.evaluate(a,s);if(!Array.isArray(o))return;const l=e.innerHTML;e.innerHTML="";const d=document.createDocumentFragment();o.forEach((e,s)=>{const a=this.renderNestedForeachItem(l,e,s,i,n,t,r);d.appendChild(a)}),e.appendChild(d)},renderNestedForeachItem(e,t,i,n,r,s,a){const o=document.createElement("div");o.innerHTML=e.trim();const c=Array.from(o.childNodes);if(1===c.length&&c[0].nodeType===Node.ELEMENT_NODE){const e=c[0].cloneNode(!0);return this.processForeachTemplate(e,t,i,n,r,s,a),e}const l=document.createElement("span");return c.forEach(e=>{l.appendChild(e.cloneNode(!0))}),this.processForeachTemplate(l,t,i,n,r,s,a),l},isNestedProperty:(e,t)=>Object.keys(t).some(t=>e.startsWith(`${t}.`)),buildNestedPropertyPath(e,t,i,n){for(const[r,s]of Object.entries(t))if(e.startsWith(`${r}.`))return`${i}.${n}.${e.substring(r.length+1)}`;return e},processForeachBinding(e,t,i,n){if(s.isEventType(t))return void this.handleEventBinding(e,t,i,n[Object.keys(n)[0]],n[Object.keys(n)[1]]);const r=this.createBindingByType(e,t,i);this.updateBinding(r,null,n)},setupEventHandling(){const e=e=>{this.handleEvent(e)};i.forEach(t=>{this.container.addEventListener(t,e,!0),this.eventListeners.set(t,e)})},handleEvent(e){const{type:t,target:i}=e,n=i.getAttribute("data-pac-property");"input"!==t&&"change"!==t||!n||this.handleInputEvent(e,i,n),this.handleCustomEvent(e,t,i)},handleInputEvent(e,t,i){const n=t.getAttribute("data-pac-update-mode")||this.config.updateMode,r=(t.getAttribute("data-pac-binding-type"),this.readDOMValue(t));switch(n){case"immediate":this.setNestedProperty(i,r);break;case"delayed":this.handleDelayedUpdate(t,i,r);break;case"change":"change"===e.type&&this.setNestedProperty(i,r)}},handleCustomEvent(e,t,i){let n=i;if("submit"===t&&"FORM"!==i.tagName&&(n=i.closest("form"),!n))return;const r=this.parseEventModifiers(i);this.applyEventModifiers(e,r)&&this.bindings.forEach(n=>{if("event"===n.type&&n.eventType===t&&(n.element===i||n.element.contains(i))){const t=this.abstraction[n.method];if("function"==typeof t)try{t.call(this.abstraction,e)}catch(e){}}})},handleEventBinding(e,t,i,n,r){e.addEventListener(t,e=>{const t=this.abstraction[i];"function"==typeof t&&t.call(this.abstraction,n,r,e)})},parseEventModifiers(e){const t=e.getAttribute("data-pac-modifiers");return t?t.trim().split(/\s+/).filter(e=>e.length>0):[]},applyEventModifiers(e,t){for(const i of t){const t=r[i.toLowerCase()];if(t){if(Array.isArray(t)){if(!t.includes(e.key))return!1}else if(e.key!==t)return!1;break}}return!0},handleDelayedUpdate(e,t,i){const n=parseInt(e.getAttribute("data-pac-update-delay"))||this.config.delay,r=`delayed_${t}`;this.updateTimeouts.has(r)&&clearTimeout(this.updateTimeouts.get(r));const s=setTimeout(()=>{this.abstraction[t]=i,this.updateTimeouts.delete(r)},n);this.updateTimeouts.set(r,s)},notifyChange(e,t,i,n={}){const r=e.split(".")[0];this.triggerWatcher(r,t,n.oldValue,e),this.updateComputedProperties(r),this.scheduleUpdate(e,t),e!==r&&this.bubbleChangeNotification(r,this.abstraction[r],"nested-change",{nestedPath:e,newValue:t,oldValue:n.oldValue})},bubbleChangeNotification(e,t,i,n){this.triggerWatcher(e,t,n.oldValue,n.nestedPath),this.updateComputedProperties(e),this.scheduleUpdate(e,t)},setElementAttribute(e,i,n){switch(i){case"style":"object"==typeof n&&n?Object.assign(e.style,n):e.style.cssText=n||"";break;case"enable":n?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled");break;default:t.includes(i)?n?e.setAttribute(i,i):e.removeAttribute(i):null!=n?e.setAttribute(i,n):e.removeAttribute(i)}},setNestedProperty(e,t){const i=e.split(".");if(1===i.length)return void(this.abstraction[e]=t);let n=this.abstraction;for(let e=0;e<i.length-1;e++)if(n=n[i[e]],!n)return;n[i[i.length-1]]=t},applyVisibilityBinding(e,t){if(t)e.hasAttribute("data-pac-hidden")&&(e.style.display=e.getAttribute("data-pac-orig-display")||"",e.removeAttribute("data-pac-hidden"),e.removeAttribute("data-pac-orig-display"));else if(!e.hasAttribute("data-pac-hidden")){const t=getComputedStyle(e).display;"none"!==t&&e.setAttribute("data-pac-orig-display",t),e.style.display="none",e.setAttribute("data-pac-hidden","true")}},applyConditionalBinding(e,t,i){if(i.isRendered!==t){if(t)return i.placeholder&&i.placeholder.parentNode&&i.placeholder.parentNode.replaceChild(e,i.placeholder),void(i.isRendered=!0);i.placeholder||(i.placeholder=document.createComment(`pac-if: ${i.target}`)),e.parentNode&&e.parentNode.replaceChild(i.placeholder,e),i.isRendered=!1}},applyAttributeBinding(e,t,i){this.setElementAttribute(e,t,i)},applyInputBinding(e,t){"radio"!==e.type?e.value!==String(t||"")&&(e.value=t||""):this.applyRadioBinding(e,t)},applyRadioBinding(e,t){e.checked=e.value===String(t||"")},applyCheckedBinding(e,t){e.checked=t},applyClassBinding(e,t,i){this.clearPreviousClasses(e);const n=this.parseClassValue(i);n.forEach(t=>e.classList.add(t)),e.dataset.pacPreviousClasses=n.join(" ")},clearPreviousClasses(e){const t=e.dataset.pacPreviousClasses;t&&t.split(" ").forEach(t=>{t.trim()&&e.classList.remove(t.trim())})},parseClassValue(e){if("object"==typeof e&&null!==e&&!Array.isArray(e))return Object.entries(e).filter(([e,t])=>t&&e.trim()).map(([e])=>e.trim());if(Array.isArray(e))return e.filter(e=>e&&"string"==typeof e&&e.trim()).map(e=>e.trim());if("string"==typeof e)return e.trim().split(/\s+/).filter(e=>e.trim());if(e){const t=String(e).trim();return t?[t]:[]}return[]},applyTextBinding(e,t,i=null){const n=e.element,r=i?Object.assign({},this.abstraction,i):this.abstraction,s=this.processTextInterpolation(e.originalText,r),a=`text_${e.id}`;this.lastValues.get(a)!==s&&(this.lastValues.set(a,s),n.textContent=s)},applyForeachBinding(e,t,i=null){if(t&&e.collection!==t)return;const n=Object.assign({},this.abstraction,i||{}),r=this.getParsedExpression(e),a=c.evaluate(r,n),o=Array.isArray(a)?a:[],l=null===e.previous,d=this.pendingUpdates&&Array.from(this.pendingUpdates).some(t=>t.startsWith(e.collection+".")),h=this.generateFingerprints(o),p=e.fingerprints||[];if(!l&&!d&&s.isEqual(h,p))return void(e.previous=[...o]);e.fingerprints=h,e.previous=[...o],e.element.innerHTML="";const u=document.createDocumentFragment();o.forEach((t,n)=>{const r=this.createForeachItemElement(e.template),s=Object.assign({},i||{},{[e.itemName]:t,[e.indexName]:n});this.processTextBindingsForElement(r,s),this.processAttributeBindingsForElement(r,s,e),u.appendChild(r)}),e.element.appendChild(u)},readDOMValue:e=>{let t;if("string"==typeof e?t=e.startsWith("#")?document.getElementById(e.slice(1)):document.querySelector(e):e&&e.nodeType&&(t=e),!t)return!1;switch(!0){case"SELECT"===t.tagName:return t.value;case"checkbox"===t.type:return t.checked;case"radio"===t.type:const e=document.querySelector(`input[name="${t.name}"]:checked`);return e?e.value:"";case"INPUT"===t.tagName||"TEXTAREA"===t.tagName:return t.value;default:return t.textContent||t.innerText}},establishHierarchy(){const{parent:e,children:t}=window.PACRegistry.getHierarchy(this.container);e&&this.parent!==e&&(this.parent=e,e.children.add(this)),t.forEach(e=>{e.parent!==this&&(e.parent&&e.parent.children.delete(e),e.parent=this,this.children.add(e))})},notifyParent(e,t){this.parent&&"function"==typeof this.parent.receiveUpdate&&this.parent.receiveUpdate(e,t,this)},receiveUpdate(e,t,i){this.abstraction.onChildUpdate&&this.abstraction.onChildUpdate(e,t,i),this.container.dispatchEvent(new CustomEvent("pac:childupdate",{detail:{eventType:e,data:t,childPAC:i},bubbles:!0}))},receiveFromParent(e,t){this.abstraction.receiveFromParent&&this.abstraction.receiveFromParent(e,t),this.container.dispatchEvent(new CustomEvent("pac:parentcommand",{detail:{command:e,data:t},bubbles:!0}))},sendToChildren(e,t){this.children.forEach(i=>{"function"==typeof i.receiveFromParent&&i.receiveFromParent(e,t)})},sendToChild(e,t,i){const n=Array.from(this.children).find(t=>t.container.matches(e));n&&n.receiveFromParent&&n.receiveFromParent(t,i)},makeHttpRequest(e,t={}){return fetch(e,{method:t.method||"GET",headers:Object.assign({"Content-Type":"application/json","X-PAC-Request":"true"},t.headers||{}),body:t.data?JSON.stringify(t.data):void 0}).then(e=>e.json()).then(e=>(t.onSuccess&&t.onSuccess.call(this.abstraction,e),e)).catch(e=>{throw t.onError&&t.onError.call(this.abstraction,e),e})},serializeToJSON(){const e={},t=this.original.computed?Object.keys(this.original.computed):[],i=["notifyParent","sendToChildren","sendToChild","findChild","toJSON"];return Object.keys(this.abstraction).forEach(n=>{const r=this.abstraction[n];void 0===r||"function"==typeof r||t.includes(n)||i.includes(n)||(e[n]=r)}),e},destroy(){this._clearTimeouts(),this._unregisterFromGlobalRegistry(),this._cleanupHierarchy(),this._cleanupReactiveReferences(),this._removeEventListeners(),this._cleanupViewportTracking(),this._clearCaches(),this._clearBindings(),this._nullifyReferences()},_clearTimeouts(){this.updateTimeouts.forEach(e=>clearTimeout(e)),this.updateTimeouts.clear()},_clearCaches(){this.deps.clear(),this.expressionCache.clear(),this.lastValues.clear()},_unregisterFromGlobalRegistry(){window.PACRegistry.unregister(this.selector),window._wakaPACGlobalHandlers&&0===window.PACRegistry.components.size&&(document.removeEventListener("visibilitychange",window._wakaPACGlobalHandlers.visibility),window.removeEventListener("scroll",window._wakaPACGlobalHandlers.scroll),window.removeEventListener("resize",window._wakaPACGlobalHandlers.resize),delete window._wakaPACGlobalHandlers,delete window._wakaPACBrowserListeners,window._wakaPACScrollTimeout&&clearTimeout(window._wakaPACScrollTimeout),window._wakaPACResizeTimeout&&clearTimeout(window._wakaPACResizeTimeout))},_clearBindings(){this.bindings.clear(),this.bindingIndex.clear()},_cleanupHierarchy(){this.parent&&this.parent.children.delete(this),this.children.forEach(e=>{e.parent===this&&(e.parent=null)}),this.parent=null,this.children.clear()},_cleanupReactiveReferences(){this.abstraction&&Object.keys(this.abstraction).forEach(e=>{const t=this.abstraction[e];"function"==typeof t&&t.name.includes("bound")&&(this.abstraction[e]=null)})},_removeEventListeners(){this.eventListeners.forEach((e,t)=>{this.container.removeEventListener(t,e,!0)}),this.eventListeners.clear()},_cleanupViewportTracking(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null),window._wakaPACViewportComponents&&window._wakaPACViewportComponents.delete(this)},_nullifyReferences(){this.abstraction=null,this.container=null}},p=function(e){const t={};return Object.keys(e.abstraction).forEach(i=>{const n=Object.getOwnPropertyDescriptor(e.abstraction,i);n&&Object.defineProperty(t,i,n)}),Object.assign(t,{addChild:e=>{h.children.add(e),e.parent=h},removeChild:e=>{h.children.delete(e),e.parent=null},notifyParent:(e,t)=>h.notifyParent(e,t),receiveUpdate:(e,t,i)=>h.receiveUpdate(e,t,i),receiveFromParent:(e,t)=>h.receiveFromParent(e,t),sendToChildren:(e,t)=>h.sendToChildren(e,t),sendToChild:(e,t,i)=>h.sendToChild(e,t,i),findChild:e=>Array.from(h.children).find(e),findChildren:e=>Array.from(h.children).filter(e),findChildBySelector:e=>Array.from(h.children).find(t=>t.container.matches(e)),findChildByProperty:(e,t)=>Array.from(h.children).find(i=>i.abstraction&&i.abstraction[e]===t),control:(e,t={})=>h.makeHttpRequest(e,t),readDOMValue:e=>h.readDOMValue(e),formatValue:e=>s.formatValue(e),escapeHTML:e=>s.escapeHTML(e),sanitizeUserInput:e=>s.sanitizeUserInput(e),destroy:()=>h.destroy()}),Object.defineProperties(t,{parent:{get:()=>h.parent,enumerable:!0},children:{get:()=>Array.from(h.children),enumerable:!0},container:{get:()=>h.container,enumerable:!0}}),t}(h.initialize());return window.PACRegistry.register(e,h),h.establishHierarchy(),window.PACRegistry.components.forEach(e=>{e===h||e.parent||e.establishHierarchy()}),p}window.PACRegistry=window.PACRegistry||new a,window.wakaPAC=l,"undefined"!=typeof module&&module.exports&&(module.exports={wakaPAC:l,ComponentRegistry:a,Utils:s})}();